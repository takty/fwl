var u=(i,e)=>()=>(i&&(e=i(i=0)),e);var D,G=u(()=>{D=class{#e=-1;#t="";userObject=null;setIndex(e){this.#e=e}setName(e){this.#t=e}index(){return this.#e}name(){return this.#t}}});var S,A=u(()=>{G();S=class i extends D{static#e=Number.MIN_VALUE;d;es=[];v=i.#e;constructor(e){super(),this.d=e}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${t} = ${r}`}size(){return this.es.length}at(e){return this.es.at(e)}has(e){return this.es.includes(e)}indexOf(e){return this.es.indexOf(e)}neighbors(){let e=[];for(let t of this.es)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.es[Symbol.iterator]()}connect(e){if(this.es.includes(e))throw new RangeError;this.es.push(e)}disconnect(e){if(!this.es.includes(e))throw new RangeError;this.es=this.es.filter(t=>t!==e)}domain(e){if(e===void 0)return this.d;this.d=e,this.clear()}assign(e){this.v=e}clear(){this.assign(i.#e)}value(){return this.v}isEmpty(){return this.value()===i.#e}}});var g,Z,X,Y=u(()=>{g=class{static create(e,t=null){if(Array.isArray(e))return new Z(e);if(t!==null)return new X(e,t);throw new RangeError}},Z=class extends g{#e;constructor(e){super(),this.#e=[...e]}contains(e){return this.#e.includes(e)}indexOf(e){return this.#e.indexOf(e)}size(){return this.#e.length}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}},X=class extends g{#e;#t;constructor(e,t){super(),this.#e=e|0,this.#t=t|0}contains(e){return this.#e<=e&&e<=this.#t}indexOf(e){return this.#e<=e&&e<=this.#t?e-this.#e:-1}size(){return this.#t-this.#e+1}at(e){return this.#e+e}[Symbol.iterator](){let e=this.#e,t=this.#t;return{next(){return e<=t?{value:e++,done:!1}:{value:null,done:!0}}}}}});var x,q,J,K,Q,ee=u(()=>{G();x=class extends D{static create(e,t){return t.length===1?new q(e,t[0]):t.length===2?new J(e,t[0],t[1]):t.length===3?new K(e,t[0],t[1],t[2]):new Q(e,...t)}r;es=[];constructor(e){super(),this.r=e}toString(){let e=this.name(),t=e?`(${e})`:"",r=this.degree(),n=r<0?"UNDEFINED":""+r;return`c${this.index()}${t} = ${n}`}size(){return this.es.length}at(e){return this.es.at(e)}has(e){return this.es.includes(e)}indexOf(e){return this.es.indexOf(e)}neighbors(){let e=[];for(let t of this.es)for(let r of t)r!==this&&e.push(r);return e}[Symbol.iterator](){return this.es[Symbol.iterator]()}relation(){return this.r}},q=class extends x{constructor(e,t){super(e),this.es=[t]}emptySize(){return this.es[0].isEmpty()?1:0}isDefined(){return!this.es[0].isEmpty()}status(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())===1?1:0}degree(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())}},J=class extends x{constructor(e,t,r){super(e),this.es=[t,r]}emptySize(){let e=0;return this.es[0].isEmpty()&&++e,this.es[1].isEmpty()&&++e,e}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())}},K=class extends x{constructor(e,t,r,n){super(e),this.es=[t,r,n]}emptySize(){let e=0;return this.es[0].isEmpty()&&++e,this.es[1].isEmpty()&&++e,this.es[2].isEmpty()&&++e,e}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()&&!this.es[2].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())}},Q=class extends x{#e;constructor(e,...t){super(e),this.es=[...t],this.#e=new Array(this.es.length)}emptySize(){let e=0;for(let t of this.es)e+=t.isEmpty()?1:0;return e}isDefined(){for(let e of this.es)if(e.isEmpty())return!1;return!0}status(){for(let e=0;e<this.es.length;++e){let t=this.es[e];if(t.isEmpty())return-1;this.#e[e]=t.value()}return this.r(...this.#e)===1?1:0}degree(){for(let e=0;e<this.es.length;++e){let t=this.es[e];if(t.isEmpty())return-1;this.#e[e]=t.value()}return this.r(...this.#e)}}});var F,te=u(()=>{A();Y();ee();F=class{#e=e=>new S(e);#t=(e,t)=>x.create(e,t);#r=[];#n=[];setVariableFactory(e){this.#e=e}setConstraintFactory(e){this.#t=e}addVariable(e){e.setIndex(this.#r.length),this.#r.push(e)}createDomain(e,t=null){if(Array.isArray(e))return g.create(e);if(t!==null)return g.create(e,t);throw new RangeError}createVariable(e,t=null,r){if(e instanceof S){let n=this.#e(e.domain());return this.addVariable(n),n.setName(n.name()),n.assign(n.value()),n}else if(e instanceof g){if(t!==null&&!e.contains(t))throw new Error;let n=this.#e(e);return this.addVariable(n),t!==null&&n.assign(t),r&&n.setName(r),n}throw new RangeError}createConstraint(e,t,r){let n=this.#t(e,t);n.setIndex(this.#n.length),this.#n.push(n);for(let s of t)s.connect(n);return r&&n.setName(r),n}removeConstraint(e){let t=this.#n.indexOf(e);this.#n.splice(t,1);for(let r=t;r<this.#n.length;++r)this.#n[r].setIndex(r);for(let r of e)r.disconnect(e)}clearAllVariables(){for(let e of this.#r)e.clear()}reverseVariables(){this.#r.reverse();for(let e=0;e<this.#r.length;++e)this.#r[e].setIndex(e)}sortVariables(e){this.#r.sort(e);for(let t=0;t<this.#r.length;++t)this.#r[t].setIndex(t)}variables(){return this.#r}variableSize(){return this.#r.length}variableAt(e){return this.#r[e]}variableOf(e){for(let t of this.#r)if(t.name()===e)return t;return null}hasVariable(e){return this.#r.includes(e)}constraints(){return this.#n}constraintSize(){return this.#n.length}constraintAt(e){return this.#n[e]}constraintOf(e){for(let t of this.#n)if(t.name()===e)return t;return null}hasConstraint(e){return this.#n.includes(e)}constraintsBetween(e,t){let r=[];for(let n of e)n.has(t)&&r.push(n);return r}constraintDensity(){return this.#n.length/this.#r.length}emptySize(){let e=0;for(let t of this.#r)e+=t.isEmpty()?1:0;return e}hasEmptyDomain(){for(let e of this.#r)if(e.domain().size()===0)return!0;return!1}degree(){let e=1;for(let t of this.#n){let r=t.degree();if(r<0)return r;r<e&&(e=r)}return e}constraintsWithDegree(){let e=[],t=1;for(let r of this.#n){let n=r.degree();n<t?(t=n,e.length=0,e.push(r)):n-t<Number.MIN_VALUE*10&&e.push(r)}return[e,t]}averageDegree(){let e=0;for(let t of this.#n)e+=t.degree();return e/this.#n.length}ratio(){return this.satisfiedConstraintSize()/this.#n.length}satisfiedConstraintSize(){let e=0;for(let t of this.#n)e+=t.status()===1?1:0;return e}violatingConstraintSize(){return this.#n.length-this.satisfiedConstraintSize()}satisfiedConstraints(){let e=[];for(let t of this.#n)t.status()===1&&e.push(t);return e}violatingConstraints(){let e=[];for(let t of this.#n)t.status()===0&&e.push(t);return e}}});var N,re=u(()=>{N=class{#e=!0;#t=e=>console.log(e);#r=()=>!1;#n=Number.MAX_SAFE_INTEGER;#i=null;#o=.8;#s=null;#a=0;#m=0;#u=-1;#l=0;initialize(){this.#a=this.#i===null?Number.MAX_VALUE:Date.now()+this.#i,this.#m=0}check(e=null){if(e!==null&&this.#o!==null&&this.#o<=e)return this.outputDebugString("Stop: Current evaluation value is above the target"),!0;if(this.#n<this.#m++)return this.outputDebugString("Stop: Number of iterations has reached the limit"),!1;if(this.#a<Date.now())return this.outputDebugString("Stop: Time limit has been reached"),!1;if(e!==null&&this.#s!==null)if(e!==-1&&this.#u===e){if(this.#s<this.#l++)return this.outputDebugString("Stop: Evaluation value has not changed for a certain number of times"),!1}else this.#u=e,this.#l=0;return null}solutionFound(e,t){return this.#r(e,t)}outputDebugString(e){this.#e&&this.#t(e)}isDebugMode(){return this.#e}isTargetAssigned(){return this.#o!==null}getTarget(){return this.#o}setIterationLimit(e=null){this.#n=e===null?Number.MAX_SAFE_INTEGER:e}setTimeLimit(e=null){this.#i=e}setTarget(e=null){this.#o=e}setSameEvaluationLimit(e=null){this.#s=e}setListener(e){this.#r=e}setDebugMode(e){this.#e=e}setDebugOutput(e){this.#t=e}}});var l,b=u(()=>{re();l=class{pro;monitor;constructor(){}name(){return""}solve(e,t=new N){this.pro=e,this.monitor=t,this.preprocess();let r=this.exec();return this.postprocess(),r}preprocess(){}exec(){return!1}postprocess(){}}});var V,ne=u(()=>{A();V=class i{#e;#t;constructor(e,t=null){if(e instanceof i)this.#e=e.variable(),this.#t=e.value();else if(e instanceof S)this.#e=e,this.#t=t??e.value();else throw new RangeError}apply(){this.#e.assign(this.#t)}toString(){return`v${this.#e.index()} <- ${this.#t}`}value(){return this.#t}variable(){return this.#e}}});function _(i){return console.log(ue===Math.random),Math.floor(ue()*i)}var ue,y=u(()=>{ue=Math.random});var h,f=u(()=>{ne();y();h=class i{static fromVariables(e){let t=new i;return t.setVariables(e),t}#e=[];constructor(){}setProblem(e){this.#e.length=0;for(let t of e.variables())this.#e.push(new V(t))}setAssignmentList(e){this.#e.length=0;for(let t of e)this.#e.push(new V(t))}setVariables(e){this.#e.length=0;for(let t of e)this.#e.push(new V(t))}addVariable(e,t=null){this.#e.push(new V(e,t))}apply(){for(let e of this.#e)e.apply()}clear(){this.#e.length=0}isEmpty(){return this.#e.length===0}size(){return this.#e.length}differenceSize(){let e=0;for(let t of this.#e)t.variable().value()!==t.value()&&++e;return e}at(e){return this.#e[e]}[Symbol.iterator](){return this.#e[Symbol.iterator]()}random(){return this.#e[_(this.#e.length)]}}});var ie=u(()=>{});var me=u(()=>{f();ie();b()});function k(i,e){let t=0,r=Number.MAX_VALUE;for(let n=0;n<i.length;++n){let s=i[n];if(!s.isEmpty())continue;let a=s.domain().size()-e[s.index()].prunedSize();a<r&&(r=a,t=n)}return t}var w,T=u(()=>{w=class i{static#e=Number.MIN_SAFE_INTEGER;#t;#r=0;constructor(e){this.#t=new Array(e),this.#t.fill(i.#e)}prunedSize(){return this.#r}prune(e,t){if(this.#t[e]===i.#e)++this.#r;else throw new Error;this.#t[e]=t}isEmpty(){return this.#t.length===this.#r}isPruned(e){return this.#t[e]!==i.#e}recover(e){for(let t=0;t<this.#t.length;++t)this.#t[t]===e&&(this.#t[t]=i.#e,--this.#r)}recoverAll(){this.#t.fill(i.#e),this.#r=0}}});var oe=u(()=>{A()});var se=u(()=>{});function I(i,e){let t=[];for(let r=0;r<e.length;++r){t.push(new Array(e.length));for(let n=0;n<e.length;++n)n<r&&(t[r][n]=i.constraintsBetween(e[n],e[r]))}return t}function le(i){let e=new Array(i.variableSize());for(let t of i.variables())e[t.index()]=Me(i,t);return e}function Me(i,e){let t=new Array(i.variableSize());t.fill(Number.MAX_VALUE);let r=new Set;r.add(e),t[e.index()]=0,he(i,e,t,0,r);let n=0,s=0;for(let o=0;o<t.length;++o)t[o]!==Number.MAX_VALUE&&o!==e.index()&&(++n,s+=t[o]);return n===0?0:s/n}function he(i,e,t,r,n){let s=[];for(let o of e)for(let a of o)t[a.index()]===Number.MAX_VALUE&&(s.push(a),t[a.index()]=r+1);for(let o of s)n.add(o);for(let o of s)he(i,o,t,r+1,n)}var L=u(()=>{te();A();oe();se()});var ce=u(()=>{f();T();L();b()});var be=u(()=>{f();b()});var $,fe=u(()=>{f();T();L();b();$=class extends l{#e;#t;#r;#n;#i;#o;#s=!0;#a=0;constructor(){super()}setUsingMinimumRemainingValuesHeuristics(e){this.#s=e}setPrePruningDegree(e){this.#a=e}name(){return"Fuzzy Forward Checking"}preprocess(){this.#e=[...this.pro.variables()],this.#t=I(this.pro,this.#e),this.#r=Array.from(this.#e,e=>new w(e.domain().size())),this.#n=new h,this.#i=this.#a,this.monitor.initialize()}exec(){let e=null;for(;e===null;){if(this.#o=!1,this.pro.clearAllVariables(),!this.#m()){e=!1;break}e=this.#u(0),this.#n.apply()}return e===!0}#m(){for(let e of this.pro.constraints()){if(e.size()!==1)continue;let t=e.at(0),r=t.domain(),n=this.#r[t.index()],s=e.relation();for(let o=0,a=r.size();o<a;++o)n.isPruned(o)||s(r.at(o))<=this.#i&&n.prune(o,-1);if(n.isEmpty())return!1}return!0}#u(e,t=1){if(e===this.pro.variableSize()){let a=this.pro.degree();return this.#n.setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${a}`),this.#i<a&&(this.#i=a,this.#o=!0,this.monitor.solutionFound(this.#n,a))?!0:this.monitor.check(a)}let r=null;if((r=this.monitor.check())!==null)return r;let n=this.#e[this.#s?k(this.#e,this.#r):e],s=n.domain(),o=this.#r[n.index()];for(let a=0,p=s.size();a<p;++a){if(o.isPruned(a))continue;n.assign(s.at(a));let z=Math.min(t,this.#b(n));if(!(z<=this.#i)){if(this.#l(e,n)&&(r=this.#u(e+1,z),r!==null||this.#o))break;for(let j of this.#r)j.recover(e)}}if(r===null){for(let a of this.#r)a.recover(e);n.clear()}return r}#l(e,t){for(let r of this.#e){if(!r.isEmpty())continue;let n=this.#h(t.index(),r.index()),s=this.#r[r.index()],o=r.domain();for(let a of n)if(a.emptySize()===1&&!this.#c(e,r,o,s,a))return!1}return!0}#h(e,t){return e<t?this.#t[t][e]:this.#t[e][t]}#c(e,t,r,n,s){for(let o=0,a=r.size();o<a;++o)n.isPruned(o)||(t.assign(r.at(o)),s.degree()<=this.#i&&n.prune(o,e));return t.clear(),!n.isEmpty()}#b(e){let t=Number.MAX_VALUE;for(let r of e){let n=r.degree();0<=n&&n<t&&(t=n)}return t}}});var de=u(()=>{f();y();b()});var pe=u(()=>{f();y();b()});var ge=u(()=>{f();b()});var ve=u(()=>{f();y();b()});var Se=u(()=>{f();T();L();b()});var xe=u(()=>{f();y();b()});var Ve=u(()=>{f();b()});var ye=u(()=>{f();T();L();b()});var d=class{#e;#t={width:0,height:0};#r={width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};_owner;constructor(e,t){this._owner=e,this.#e=t}getDegree(){return this.#e}setMinimumSize(e){this.#t={...e}}getMinimumSize(){return{...this.#t}}setMaximumSize(e){this.#r={...e}}getMaximumSize(){return{...this.#r}}};var ae=class extends d{#e;constructor(e,t,r){super(e,t),this.#e=r;let n={width:this.#e.length+2,height:2};this.setMinimumSize(n),this.setMaximumSize(n)}name(){return"button"}};var R=class extends d{#e;constructor(e,t,r){super(e,t),this.#e=r;let n={width:this.#e.length+2,height:1};this.setMinimumSize(n),this.setMaximumSize(n)}name(){return"checkbox"}};var O=class extends d{#e;constructor(e,t,r){super(e,t),this.#e=[...r];let n=0;for(let o of r)n=Math.max(n,o.length);let s={width:n+1,height:r.length*1};this.setMinimumSize(s),this.setMaximumSize(s)}name(){return"checkboxes"}};var P=class extends d{#e;constructor(e,t,r){super(e,t),this.#e=r;let n={width:this.#e.length,height:1};this.setMinimumSize(n),this.setMaximumSize(n)}name(){return"label"}};var C=class i extends d{static MIN_ITEM_SIZE=4;#e;static createVariableInstances(e,t,r){if(r.length<=i.MIN_ITEM_SIZE)return[[t,o=>new i(o,t,r,i.MIN_ITEM_SIZE)]];let n=[],s=t-e;for(let o=i.MIN_ITEM_SIZE+1;o<r.length;++o){let a=t+s*(o/r.length-1),p=o;n.push([a,z=>new i(z,a,r,p)])}return n}constructor(e,t,r,n=r.length){super(e,t),this.#e=[...r];let s=Math.min(n,i.MIN_ITEM_SIZE)*1,o=0;for(let a of r)o=Math.max(o,a.length);this.setMinimumSize({width:o+1,height:s}),this.setMaximumSize({width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER})}name(){return"list box"}};var E=class extends d{#e;constructor(e,t,r){super(e,t),this.#e=[...r];let n=0;for(let o of r)n=Math.max(n,o.length);let s={width:n+1,height:r.length*1};this.setMinimumSize(s),this.setMaximumSize(s)}name(){return"radio buttons"}};var m=class i{static NO_DIR=-1;static VERTICAL=0;static HORIZONTAL=1;#e;#t;#r;constructor(e,t,r=i.NO_DIR){this.#e=e,this.#t=t,this.#r=r}getOwner(){return this.#e}getDegree(){return this.#t}getDirection(){return this.#r}getEstimatedMinimumSize(e){let t=e.map(r=>r.getEstimatedMinimumSize());return this._calcSize(t)}getEstimatedMinimumSizeIf(e,t,r){let n=e.map(s=>t===s?r:s.getEstimatedMinimumSize());return this._calcSize(n)}getMinimumSize(e){let t=e.map(r=>r.getMinimumSize());return this._calcSize(t)}getMaximumSize(){return{width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER}}};te();G();A();Y();ee();b();re();me();ce();be();fe();de();pe();ge();ve();Se();xe();Ve();ye();f();b();ne();f();ie();T();y();function we(i){let e=new Set;for(let t of i.constraints())Pe(t,e);return e}function Pe(i,e){switch(i.size()){case 1:Fe(i,e);break;case 2:ke(i,e);break;case 3:Ie(i,e);break;default:Re(i,e);break}}function Fe(i,e){let t=i.at(0);for(let r of t.domain())e.add(i.relation()(r))}function ke(i,e){let t=i.at(0),r=i.at(1),n=t.isEmpty()?t.domain():[t.value()],s=r.isEmpty()?r.domain():[r.value()];for(let o of n)for(let a of s)e.add(i.relation()(o,a))}function Ie(i,e){let t=i.at(0),r=i.at(1),n=i.at(2),s=t.isEmpty()?t.domain():[t.value()],o=r.isEmpty()?r.domain():[r.value()],a=n.isEmpty()?n.domain():[n.value()];for(let p of s)for(let z of o)for(let j of a)e.add(i.relation()(p,z,j))}function Re(i,e){let t=new Array(i.emptySize()),r=0,n=new Array(i.size());for(let s=0,o=i.size();s<o;++s){let a=i.at(s);a.isEmpty()?t[r++]=s:n[s]=a.value()}ze(i,n,t,0,0,e)}function ze(i,e,t,r,n,s){let o=t[r],a=i.at(o).domain();if(r===t.length-1)for(let p of a)e[o]=p,s.add(i.relation()(...e));else for(let p of a)e[o]=p,ze(i,e,t,r+1,n,s)}L();se();oe();var M=class{#e;#t;#r={width:0,height:0};#n={x:0,y:0};_estMinSize={width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};_states=[];_cans=[];_baseCans=[];name(){return""}setParent(e){this.#e=e}getParent(){return this.#e}getVariable(){return this.#t}getEstimatedMinimumSize(){return{...this._estMinSize}}_getCandidateEntries(){return[]}_assignCandidates(e,t){t.length=0;for(let[r,n]of this._getCandidateEntries())e<=r&&t.push(n(this))}initializeProblem(e){this._assignCandidates(0,this._cans),this._baseCans=[...this._cans],this.#t=e.createVariable(g.create([0]),0,this.name()+": type"),e.createConstraint(t=>this.#i(t),[this.#t],this.name()+": type")}#i(e){return this._states.length===0?0:this._typeToCandidate(e).getDegree()}_typeToCandidate(e=null){return e===null&&this.#t&&(e=this.#t.value()),e!==null&&this._states[e]?this._cans[this._states[e].comb[0]]:null}isValid(){return!(!this.#t||this.#t.isEmpty()||!this._states[this.#t.value()])}getMinimumSize(){return{...this._states[this.#t.value()].size}}getMaximumSize(){return this._typeToCandidate().getMaximumSize()}getSize(){return{...this.#r}}setSize(e,t){this.#r={width:e,height:t}}getLocation(){return{...this.#n}}setLocation(e,t){this.#n={x:e,y:t}}};var c=class i extends M{static SAME_DIRECTION=.5;#e=[];name(){return this._typeToCandidate()?.name()??"layout"}add(e){e.setParent(this),this.#e.push(e)}children(){return this.#e}getDescendantSize(){let e=this.#e.length;for(let t of this.#e)t instanceof i&&(e+=t.getDescendantSize());return e}initializeProblem(e){super.initializeProblem(e);for(let t=0;t<this.#e.length;++t){let r=this.#e[t];r.initializeProblem(e),e.createConstraint((n,s)=>this.#t(t,n,s),[this.getVariable(),r.getVariable()],this.name()+": toChild"),r instanceof i&&e.createConstraint((n,s)=>this.#r(r,n,s),[this.getVariable(),r.getVariable()],this.name()+": toChild")}}#t(e,t,r){return this._states[t].comb[e+1]===r?1:0}#r(e,t,r){let n=this._typeToCandidate(t).getDirection(),s=e._typeToCandidate(r).getDirection();return n!==m.NO_DIR&&s!==m.NO_DIR&&n===s?i.SAME_DIRECTION:1}initializeEstimatedMinimumSize(){for(let r of this.#e)r.initializeEstimatedMinimumSize();let e=Number.MAX_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER;for(let r of this._cans){let n=r.getEstimatedMinimumSize(this.#e);e=Math.min(e,n.width),t=Math.min(t,n.height)}this._estMinSize={width:e,height:t}}initializeDomain(e){for(let o of this.#e)if(!o.initializeDomain(e))return!1;let t=new Array(this.#e.length+1).fill(0),r=new Array(this.#e.length+1).fill(0);r[0]=this._cans.length;for(let o=0;o<this.#e.length;++o)r[o+1]=this.#e[o]._states.length;let n=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;this._states.length=0;do{for(let a=0;a<this.#e.length;++a)this.#e[a].getVariable().assign(t[a+1]);let o=this._cans[t[0]].getMinimumSize(this.#e);this.getParent().checkGivenMaximumSize(this,o)&&(this._states.push({comb:[...t],size:o}),n=Math.min(n,o.width),s=Math.min(s,o.height))}while(this.#n(t,r));for(let o of this.#e)o.getVariable().clear();return this._estMinSize={width:n,height:s},this._states.length===0?!1:(this.getVariable().domain(e.createDomain(0,this._states.length-1)),!0)}#n(e,t){for(let r=0;r<e.length&&(e[r]++,!(e[r]<t[r]));++r){if(r===e.length-1)return!1;e[r]=0}return!0}checkGivenMaximumSize(e,t){for(let r of this._cans){let n=r.getEstimatedMinimumSizeIf(this.#e,e,t);if(this.getParent().checkGivenMaximumSize(this,n))return!0}return!1}setWorstDegree(e){if(this._assignCandidates(e,this._cans),this._cans.length===0)return!1;for(let t of this.#e)if(!t.setWorstDegree(e))return!1;return!0}doLayout(){this._typeToCandidate().doLayout(this.#e,this.getSize())}};var B=class extends m{constructor(e,t){super(e,t,m.HORIZONTAL)}name(){return"horizontal array"}_calcSize(e){let t=0,r=0;for(let n of e)t+=n.width,r<n.height&&(r=n.height);return t+=(e.length-1)*1+2,r+=2,{width:t,height:r}}doLayout(e,t){let r=1;for(let n of e){let s=n.getMinimumSize(),o=n.getMaximumSize();n.setSize(s.width,Math.min(t.height-2,o.height)),n.setLocation(r,1),n instanceof c&&n.doLayout(),r+=n.getSize().width+1}}};var U=class extends m{constructor(e,t){super(e,t,m.VERTICAL)}name(){return"vertical array"}_calcSize(e){let t=0,r=0;for(let n of e)t<n.width&&(t=n.width),r+=n.height;return t+=2,r+=(e.length-1)*1+2,{width:t,height:r}}doLayout(e,t){let r=1;for(let n of e){let s=n.getMinimumSize(),o=n.getMaximumSize();n.setSize(Math.min(t.width-2,o.width),s.height),n.setLocation(1,r),n instanceof c&&n.doLayout(),r+=n.getSize().height+1}}};var W=class extends m{constructor(e,t){super(e,t,m.HORIZONTAL)}name(){return"left labeling"}_calcSize(e){let t=e[0].width+1+e[1].width+2,r=Math.max(e[0].height,e[1].height)+2;return{width:t,height:r}}doLayout(e,t){let r=e[0],n=e[1],s=r.getMinimumSize(),o=n.getMaximumSize();r.setSize(s.width,s.height),r.setLocation(1,1),n.setSize(Math.min(t.width-2-(s.width+1),o.width),Math.min(t.height-2,o.height)),n.setLocation(1+r.getSize().width+1,1),n instanceof c&&n.doLayout()}};var H=class extends m{#e=1;constructor(e,t){super(e,t,m.VERTICAL)}name(){return"top labeling"}_calcSize(e){let t=Math.max(e[0].width,e[1].width+this.#e)+2,r=e[0].height+1+e[1].height+2;return{width:t,height:r}}doLayout(e,t){let r=e[0],n=e[1],s=r.getMinimumSize(),o=n.getMaximumSize();r.setSize(s.width,s.height),r.setLocation(1,1),n.setSize(Math.min(t.width-2-this.#e,o.width),Math.min(t.height-2-(s.height+1),o.height)),n.setLocation(1+this.#e,1+r.getSize().height+1),n instanceof c&&n.doLayout()}};var v=class extends M{name(){return this._typeToCandidate()?.name()??"control"}initializeEstimatedMinimumSize(){let e=Number.MAX_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER;for(let r of this._cans){let n=r.getMinimumSize();e=Math.min(e,n.width),t=Math.min(t,n.height)}this._estMinSize={width:e,height:t}}initializeDomain(e){this._states.length=0;for(let t=0;t<this._cans.length;t+=1){let r=this._cans[t].getMinimumSize();this.getParent().checkGivenMaximumSize(this,r)&&this._states.push({comb:[t],size:r})}return this._states.length===0?!1:(this.getVariable().domain(e.createDomain(0,this._states.length-1)),!0)}setWorstDegree(e){return this._assignCandidates(e,this._cans),this._cans.length!==0}};var Ee=class extends v{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}name(){return"caption ("+super.name()+")"}_getCandidateEntries(){return[[1,e=>new P(e,1,this.#e)],[.8,e=>new P(e,.8,this.#t)]]}};var De=class extends v{#e;constructor(...e){super(),this.#e=e}name(){return"multiple ("+super.name()+")"}_getCandidateEntries(){let e=C.createVariableInstances(.75,.9,this.#e);return e.push([1,t=>new O(t,1,this.#e)]),e}};var Ae=class extends v{#e;constructor(...e){super(),this.#e=e}name(){return"single ("+super.name()+")"}_getCandidateEntries(){let e=C.createVariableInstances(.75,.9,this.#e);return e.push([1,t=>new E(t,1,this.#e)]),e}};var Ne=class extends v{#e;#t;constructor(e,t){super(),this.#e=e,this.#t=t}name(){return"single boolean ("+super.name()+")"}_getCandidateEntries(){return[[.9,e=>new R(e,.9,this.#e)],[1,e=>new E(e,1,[this.#e,this.#t])]]}};var _e=class extends c{constructor(e){if(super(),e.children)for(let t of e.children)this.add(t)}_getCandidateEntries(){return[[.98,e=>new B(e,.98)],[1,e=>new U(e,1)]]}};var Te=class extends c{constructor(e,t){super(),this.add(e),this.add(t)}_getCandidateEntries(){return[[1,e=>new W(e,1)],[.9,e=>new H(e,.9)]]}};var Le=class i{static DEBUG=!0;static SORT_BY_DESCENDANT=!0;static SORT_BY_PATH_LENGTH=!0;#e;#t={width:0,height:0};#r=0;setRootContainer(e){this.#e=e;let t=this;this.#e.setParent(new class{checkGivenMaximumSize(r,n){let s=t.#t.height,o=t.#t.width;return n.height<=s&&n.width<=o}})}getRootContainer(){return this.#e}getLastSatisfactionDegree(){return this.#r}layoutContainer(e){return!!this.#n(e)}#n(e){this.#t={...e};let t=new F;this.#e.initializeProblem(t),this.#s(t),this.#o(t,0);let r=we(t);return this.#i(t,r)?(this.#e.setSize(this.#t.width,this.#t.height),this.#e.setLocation(0,0),this.#e.doLayout(),!0):!1}#i(e,t){let r=0;i.DEBUG&&(console.log(`
solveProblem - started`),r=Date.now());let n=!1,s=[...t.values()].sort((o,a)=>a-o);for(let o of s){if(o<=0||(i.DEBUG&&console.log(`	Iteration in wsd ${o}`),!this.#o(e,o)))continue;let a=new N;a.setTarget(o),a.setTimeLimit(100);let p=new $;if(p.setPrePruningDegree(o-Number.EPSILON),p.solve(e,a)){n=!0,this.#r=o;break}}return i.DEBUG&&(console.log(`solveProblem - finished (${n}, wsd = ${e.degree()})
`),console.log(`time: ${Date.now()-r}`)),n}#o(e,t){return!this.#e.setWorstDegree(t)||(this.#e.initializeEstimatedMinimumSize(),!this.#e.initializeDomain(e))?(console.log("Failure: initializeDomain"),!1):!0}#s(e){let t=le(e),r=[this.#e.getVariable()],n=[this.#e];for(;n.length>0;){let s=[];for(let o of n)for(let a of o.children())a instanceof c&&s.push(a);this.#a(s,t);for(let o of s)r.push(o.getVariable());n=s}e.sortVariables((s,o)=>r.indexOf(s)-r.indexOf(o))}#a(e,t){e.sort((r,n)=>{if(i.SORT_BY_DESCENDANT){let s=r.getDescendantSize(),a=n.getDescendantSize()-s;if(a!==0)return a}if(i.SORT_BY_PATH_LENGTH){let s=t[r.getVariable().index()];return t[n.getVariable().index()]-s}return 0})}};export{ae as Button,Ee as Caption,R as Checkbox,O as Checkboxes,d as Control,v as FControl,M as FElement,c as FLayout,Le as FlexibleLayout,_e as Group,B as HorizontalArray,P as Label,Te as Labeling,m as Layout,W as LeftLabeling,C as ListBox,De as Multiple,E as RadioButtons,Ae as Single,Ne as SingleBoolean,H as TopLabeling,U as VerticalArray};
//# sourceMappingURL=fwl.min.js.map
