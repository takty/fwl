var v=class{#t;#e={width:0,height:0};#n={width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};_owner;constructor(t,e){this._owner=t,this.#t=e}getDegree(){return this.#t}addPossibleDegreesTo(t){t.add(this.#t)}setMinimumSize(t){this.#e={...t}}getMinimumSize(){return{...this.#e}}setMaximumSize(t){this.#n={...t}}getMaximumSize(){return{...this.#n}}};var Y=class extends v{#t;constructor(t,e,i){super(t,e),this.#t=i;let r={width:this.#t.length+2,height:2};this.setMinimumSize(r),this.setMaximumSize(r)}name(){return"button"}};var O=class extends v{#t;constructor(t,e,i){super(t,e),this.#t=i;let r={width:this.#t.length+2,height:1};this.setMinimumSize(r),this.setMaximumSize(r)}name(){return"checkbox"}};var R=class extends v{#t;constructor(t,e,i){super(t,e),this.#t=[...i];let r=0;for(let n of i)r=Math.max(r,n.length);let s={width:r+1,height:i.length*1};this.setMinimumSize(s),this.setMaximumSize(s)}name(){return"checkboxes"}};var L=class extends v{#t;constructor(t,e,i){super(t,e),this.#t=i;let r={width:this.#t.length,height:1};this.setMinimumSize(r),this.setMaximumSize(r)}name(){return"label"}};var x=class a extends v{static MIN_ITEM_SIZE=4;#t;static createVariableInstances(t,e,i){if(i.length<=a.MIN_ITEM_SIZE)return[[e,n=>new a(n,e,i,a.MIN_ITEM_SIZE)]];let r=[],s=e-t;for(let n=a.MIN_ITEM_SIZE+1;n<i.length;++n){let o=e+s*(n/i.length-1),l=n;r.push([o,u=>new a(u,o,i,l)])}return r}constructor(t,e,i,r=i.length){super(t,e),this.#t=[...i];let s=Math.min(r,a.MIN_ITEM_SIZE)*1,n=0;for(let o of i)n=Math.max(n,o.length);this.setMinimumSize({width:n+1,height:s}),this.setMaximumSize({width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER})}name(){return"list box"}};var w=class extends v{#t;constructor(t,e,i){super(t,e),this.#t=[...i];let r=0;for(let n of i)r=Math.max(r,n.length);let s={width:r+1,height:i.length*1};this.setMinimumSize(s),this.setMaximumSize(s)}name(){return"radio buttons"}};var p=class a{static NO_DIR=-1;static VERTICAL=0;static HORIZONTAL=1;#t;#e;#n;constructor(t,e,i=a.NO_DIR){this.#t=t,this.#e=e,this.#n=i}getOwner(){return this.#t}getDegree(){return this.#e}getDirection(){return this.#n}getEstimatedMinimumSize(t){let e=t.map(i=>i.getEstimatedMinimumSize());return this._calcSize(e)}getEstimatedMinimumSizeIf(t,e,i){let r=t.map(s=>e===s?i:s.getEstimatedMinimumSize());return this._calcSize(r)}getMinimumSize(t){let e=t.map(i=>i.getMinimumSize());return this._calcSize(e)}getMaximumSize(){return{width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER}}};var C=class{#t=-1;#e="";userObject=null;solverObject=null;setIndex(t){this.#t=t}setName(t){this.#e=t}index(){return this.#t}name(){return this.#e}};var A=class a extends C{static#t=Number.MIN_VALUE;#e;#n;#i=a.#t;#r=[];constructor(t,e){super(),this.#e=t,this.#n=e}toString(){let t=this.name(),e=t?`(${t})`:"",i=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${e} = ${i}`}size(){return this.#r.length}at(t){return this.#r.at(t)}has(t){return this.#r.includes(t)}indexOf(t){return this.#r.indexOf(t)}neighbors(){let t=[];for(let e of this.#r)for(let i of e)i!==this&&t.push(i);return t}[Symbol.iterator](){return this.#r[Symbol.iterator]()}owner(){return this.#e}connect(t){if(this.#r.includes(t))throw new RangeError;this.#r.push(t)}disconnect(t){if(!this.#r.includes(t))throw new RangeError;this.#r=this.#r.filter(e=>e!==t)}domain(t){if(t===void 0)return this.#n;this.#n=t,this.clear()}assign(t){this.#i=t}clear(){this.assign(a.#t)}value(){return this.#i}isEmpty(){return this.value()===a.#t}};var _=class{random(){return this.at(Math.floor(Math.random()*this.size()))}};var I=class extends _{#t;#e;constructor(t,e){super(),this.#t=t|0,this.#e=e|0}contains(t){return this.#t<=t&&t<=this.#e}indexOf(t){return this.#t<=t&&t<=this.#e?t-this.#t:-1}size(){return this.#e-this.#t+1}at(t){return this.#t+t}[Symbol.iterator](){let t=this.#t,e=this.#e;return{next(){return t<=e?{value:t++,done:!1}:{value:null,done:!0}}}}};var F=class extends _{#t;constructor(t){super(),this.#t=[...t]}contains(t){return this.#t.includes(t)}indexOf(t){return this.#t.indexOf(t)}size(){return this.#t.length}at(t){return this.#t[t]}[Symbol.iterator](){return this.#t[Symbol.iterator]()}};var h=class a extends C{static UNDEFINED=-1;rel;constructor(t){super(),this.rel=t}crispRelation(){return this.rel}fuzzyRelation(){return this.rel}isFuzzy(){return"satisfactionDegree"in this.rel}toString(){let t=this.name(),e=t?`(${t})`:"",i=this.satisfactionDegree(),r=i===a.UNDEFINED?"UNDEFINED":""+i;return`c${this.index()}${e} = ${r}`}};var k=class extends h{#t=[];constructor(t,e){super(t),this.#t=[e]}size(){return 1}at(t){return this.#t.at(t)}has(t){return t===this.#t[0]}indexOf(t){return t===this.#t[0]?0:-1}neighbors(){let t=[];for(let e of this.#t[0])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#t[Symbol.iterator]()}emptyVariableSize(){return this.#t[0].isEmpty()?1:0}isDefined(){return!this.#t[0].isEmpty()}isSatisfied(){return this.#t[0].isEmpty()?h.UNDEFINED:this.crispRelation().isSatisfied(this.#t[0].value())?1:0}satisfactionDegree(){return this.#t[0].isEmpty()?h.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#t[0].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=0;for(let i of this.#t[0].domain()){let r=this.fuzzyRelation().satisfactionDegree(i);if(r>e&&(e=r),e===1)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=1;for(let i of this.#t[0].domain()){let r=this.fuzzyRelation().satisfactionDegree(i);if(r<e&&(e=r),e===0)break}return e}};var j=class extends h{#t=[];constructor(t,e,i){super(t),this.#t=[e,i]}size(){return 2}at(t){return this.#t.at(t)}has(t){return this.#t[0]===t||this.#t[1]===t}indexOf(t){return t===this.#t[0]?0:t===this.#t[1]?1:-1}neighbors(){let t=[];for(let e of this.#t[0])e!==this&&t.push(e);for(let e of this.#t[1])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#t[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#t[0].isEmpty()&&++t,this.#t[1].isEmpty()&&++t,t}isDefined(){return!this.#t[0].isEmpty()&&!this.#t[1].isEmpty()}isSatisfied(){return this.#t[0].isEmpty()||this.#t[1].isEmpty()?h.UNDEFINED:this.crispRelation().isSatisfied(this.#t[0].value(),this.#t[1].value())?1:0}satisfactionDegree(){return this.#t[0].isEmpty()||this.#t[1].isEmpty()?h.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#t[0].value(),this.#t[1].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=0,i=this.#t[0].value(),r=this.#t[1].value(),s=this.#t[0].domain(),n=this.#t[1].domain();if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty())for(let o of s){let l=this.fuzzyRelation().satisfactionDegree(o,r);if(l>e&&(e=l),e===1)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty())for(let o of n){let l=this.fuzzyRelation().satisfactionDegree(i,o);if(l>e&&(e=l),e===1)break}else for(let o of s)for(let l of n){let u=this.fuzzyRelation().satisfactionDegree(o,l);if(u>e&&(e=u),e===1)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=1,i=this.#t[0].value(),r=this.#t[1].value(),s=this.#t[0].domain(),n=this.#t[1].domain();if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty())for(let o of s){let l=this.fuzzyRelation().satisfactionDegree(o,r);if(l<e&&(e=l),e===0)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty())for(let o of n){let l=this.fuzzyRelation().satisfactionDegree(i,o);if(l<e&&(e=l),e===0)break}else for(let o of s)for(let l of n){let u=this.fuzzyRelation().satisfactionDegree(o,l);if(u<e&&(e=u),e===0)break}return e}};var U=class extends h{#t=[];constructor(t,e,i,r){super(t),this.#t=[e,i,r]}size(){return 3}at(t){return this.#t.at(t)}has(t){return this.#t[0]===t||this.#t[1]===t||this.#t[2]===t}indexOf(t){return t===this.#t[0]?0:t===this.#t[1]?1:t===this.#t[2]?2:-1}neighbors(){let t=[];for(let e of this.#t[0])e!==this&&t.push(e);for(let e of this.#t[1])e!==this&&t.push(e);for(let e of this.#t[2])e!==this&&t.push(e);return t}[Symbol.iterator](){return this.#t[Symbol.iterator]()}emptyVariableSize(){let t=0;return this.#t[0].isEmpty()&&++t,this.#t[1].isEmpty()&&++t,this.#t[2].isEmpty()&&++t,t}isDefined(){return!this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&!this.#t[2].isEmpty()}isSatisfied(){return this.#t[0].isEmpty()||this.#t[1].isEmpty()||this.#t[2].isEmpty()?h.UNDEFINED:this.crispRelation().isSatisfied(this.#t[0].value(),this.#t[1].value(),this.#t[2].value())?1:0}satisfactionDegree(){return this.#t[0].isEmpty()||this.#t[1].isEmpty()||this.#t[2].isEmpty()?h.UNDEFINED:this.fuzzyRelation().satisfactionDegree(this.#t[0].value(),this.#t[1].value(),this.#t[2].value())}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=1,i=this.#t[0].value(),r=this.#t[1].value(),s=this.#t[2].value(),n=this.#t[0].domain(),o=this.#t[1].domain(),l=this.#t[2].domain();if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of n){let m=this.fuzzyRelation().satisfactionDegree(u,r,s);if(m>e&&(e=m),e===1)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of o){let m=this.fuzzyRelation().satisfactionDegree(i,u,s);if(m>e&&(e=m),e===1)break}else if(!this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of l){let m=this.fuzzyRelation().satisfactionDegree(i,r,u);if(m>e&&(e=m),e===1)break}else if(this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of n)for(let m of o){let c=this.fuzzyRelation().satisfactionDegree(u,m,s);if(c>e&&(e=c),e===1)break}else if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of n)for(let m of l){let c=this.fuzzyRelation().satisfactionDegree(u,r,m);if(c>e&&(e=c),e===1)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of o)for(let m of l){let c=this.fuzzyRelation().satisfactionDegree(i,u,m);if(c>e&&(e=c),e===1)break}else for(let u of n)for(let m of o)for(let c of l){let f=this.fuzzyRelation().satisfactionDegree(u,m,c);if(f>e&&(e=f),e===1)break}return e}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=1,i=this.#t[0].value(),r=this.#t[1].value(),s=this.#t[2].value(),n=this.#t[0].domain(),o=this.#t[1].domain(),l=this.#t[2].domain();if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of n){let m=this.fuzzyRelation().satisfactionDegree(u,r,s);if(m<e&&(e=m),e===0)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of o){let m=this.fuzzyRelation().satisfactionDegree(i,u,s);if(m<e&&(e=m),e===0)break}else if(!this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of l){let m=this.fuzzyRelation().satisfactionDegree(i,r,u);if(m<e&&(e=m),e===0)break}else if(this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&!this.#t[2].isEmpty())for(let u of n)for(let m of o){let c=this.fuzzyRelation().satisfactionDegree(u,m,s);if(c<e&&(e=c),e===0)break}else if(this.#t[0].isEmpty()&&!this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of n)for(let m of l){let c=this.fuzzyRelation().satisfactionDegree(u,r,m);if(c<e&&(e=c),e===0)break}else if(!this.#t[0].isEmpty()&&this.#t[1].isEmpty()&&this.#t[2].isEmpty())for(let u of o)for(let m of l){let c=this.fuzzyRelation().satisfactionDegree(i,u,m);if(c<e&&(e=c),e===0)break}else for(let u of n)for(let m of o)for(let c of l){let f=this.fuzzyRelation().satisfactionDegree(u,m,c);if(f<e&&(e=f),e===0)break}return e}};var B=class extends h{#t;#e;constructor(t,...e){super(t),this.#t=[...e],this.#e=new Array(this.#t.length)}size(){return this.#t.length}at(t){return this.#t.at(t)}has(t){return this.#t.includes(t)}indexOf(t){return this.#t.indexOf(t)}neighbors(){let t=[];for(let e of this.#t)for(let i of e)i!==this&&t.push(i);return t}[Symbol.iterator](){return this.#t[Symbol.iterator]()}emptyVariableSize(){let t=0;for(let e of this.#t)e.isEmpty()&&++t;return t}isDefined(){for(let t of this.#t)if(t.isEmpty())return!1;return!0}isSatisfied(){for(let t=0;t<this.#t.length;++t){let e=this.#t[t];if(e.isEmpty())return-1;this.#e[t]=e.value()}return this.crispRelation().isSatisfied(...this.#e)?1:0}satisfactionDegree(){for(let t=0;t<this.#t.length;++t){let e=this.#t[t];if(e.isEmpty())return h.UNDEFINED;this.#e[t]=e.value()}return this.fuzzyRelation().satisfactionDegree(...this.#e)}highestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=new Array(this.emptyVariableSize()),i=0;for(let r=0;r<this.#t.length;++r){let s=this.#t[r];s.isEmpty()?e[i++]=r:this.#e[r]=s.value()}return this.checkHCD(e,0,0)}lowestConsistencyDegree(){let t=this.satisfactionDegree();if(t!==h.UNDEFINED)return t;let e=new Array(this.emptyVariableSize()),i=0;for(let r=0;r<this.#t.length;++r){let s=this.#t[r];s.isEmpty()?e[i++]=r:this.#e[r]=s.value()}return this.checkLCD(e,0,1)}checkHCD(t,e,i){let r=t[e],s=this.#t[r].domain();if(e===t.length-1)for(let n of s){this.#e[r]=n;let o=this.fuzzyRelation().satisfactionDegree(...this.#e);if(o>i&&(i=o),i===1)break}else for(let n of s)this.#e[r]=n,i=this.checkLCD(t,e+1,i);return i}checkLCD(t,e,i){let r=t[e],s=this.#t[r].domain();if(e===t.length-1)for(let n of s){this.#e[r]=n;let o=this.fuzzyRelation().satisfactionDegree(...this.#e);if(o<i&&(i=o),i===0)break}else for(let n of s)this.#e[r]=n,i=this.checkLCD(t,e+1,i);return i}};var T=class{#t=(t,e)=>new A(t,e);#e=(t,e)=>e.length===1?new k(t,e[0]):e.length===2?new j(t,e[0],e[1]):e.length===3?new U(t,e[0],e[1],e[2]):new B(t,...e);#n=!1;#i=[];#r=[];setVariableFactory(t){this.#t=t}setConstraintFactory(t){this.#e=t}addVariable(t){t.setIndex(this.#i.length),this.#i.push(t)}createDomain(t){return"values"in t?new F(t.values):"min"in t&&"max"in t?new I(t.min,t.max):null}createVariable(t){if("variable"in t){let e=this.#t(this,t.variable.domain());return this.addVariable(e),e.setName(e.name()),e.assign(e.value()),e}else{if(t.value!==void 0&&!t.domain.contains(t.value))throw new Error;let e=this.#t(this,t.domain);return this.addVariable(e),t.name&&e.setName(t.name),t.value&&e.assign(t.value),e}}createConstraint(t){for(let i of t.variables)if(i.owner()!==this)return null;let e=this.#e(t.relation,t.variables);e.setIndex(this.#r.length),this.#r.push(e);for(let i of t.variables)i.connect(e);return e.isFuzzy()&&(this.#n=!0),"name"in t&&e.setName(t.name),e}removeConstraint(t){let e=this.#r.indexOf(t);this.#r.splice(e,1);for(let i=e;i<this.#r.length;++i)this.#r[i].setIndex(i);for(let i of t)i.disconnect(t);this.#n=!1;for(let i of this.#r)if(i.isFuzzy()){this.#n=!0;break}}clearAllVariables(){for(let t of this.#i)t.clear()}reverseVariables(){this.#i.reverse();for(let t=0;t<this.#i.length;++t)this.#i[t].setIndex(t)}sortVariables(t){this.#i.sort(t);for(let e=0;e<this.#i.length;++e)this.#i[e].setIndex(e)}variableSize(){return this.#i.length}variableAt(t){return this.#i[t]}variableOf(t){for(let e of this.#i)if(e.name()===t)return e;return null}hasVariable(t){return this.#i.includes(t)}variables(){return this.#i}constraintSize(){return this.#r.length}constraintAt(t){return this.#r[t]}constraintOf(t){for(let e of this.#r)if(e.name()===t)return e;return null}hasConstraint(t){return this.#r.includes(t)}constraints(){return this.#r}constraintsBetween(t,e){let i=[];for(let r of t)r.has(e)&&i.push(r);return i}constraintsWithWorstSatisfactionDegree(){let t=[],e=1;for(let i of this.#r){let r=i.satisfactionDegree();r<e?(e=r,t.length=0,t.push(i)):r-e<Number.MIN_VALUE*10&&t.push(i)}return[t,e]}worstSatisfactionDegree(){let t=1;for(let e of this.#r){let i=e.satisfactionDegree();if(i===h.UNDEFINED)return h.UNDEFINED;i<t&&(t=i)}return t}averageSatisfactionDegree(){let t=0;for(let e of this.#r)t+=e.satisfactionDegree();return t=t/this.#r.length,t}emptyVariableSize(){let t=0;for(let e of this.#i)e.isEmpty()&&t++;return t}constraintDensity(){return this.constraintSize()/this.variableSize()}hasEmptyDomain(){for(let t of this.#i)if(t.domain().size()===0)return!0;return!1}isFuzzy(){return this.#n}};var g=class{_debug=!0;#t=t=>console.log(t);_pro;_iterLimit=null;_timeLimit=null;_targetDeg=.8;#e=[];constructor(t){this._pro=t}name(){return""}exec(){return!1}setIterationLimit(t=null){this._iterLimit=t}setTimeLimit(t=null){this._timeLimit=t}setTargetRate(t=null){this._targetDeg=t}solve(){return this.exec()}addListener(t){this.#e.push(t)}removeListener(t){this.#e.splice(this.#e.indexOf(t),1)}foundSolution(t,e){let i=!1;for(let r of this.#e)r.foundSolution(t,e)&&(i=!0);return i}setDebugMode(t){this._debug=t}setDebugOutput(t){this.#t=t}_debugOutput(t){this._debug&&this.#t(t)}};var D=class{#t;#e;constructor(t){if("assignment"in t)this.#t=t.assignment.variable(),this.#e=t.assignment.value();else if("variable"in t)this.#t=t.variable,this.#e=t.value??t.variable.value();else throw new RangeError}apply(){this.#t.assign(this.#e)}toString(){return`v${this.#t.index()} <- ${this.#e}`}value(){return this.#e}variable(){return this.#t}};var d=class a{static fromVariables(t){let e=new a;return e.setVariables(t),e}#t=[];constructor(){}setProblem(t){this.#t.length=0;for(let e of t.variables())this.#t.push(new D({variable:e,value:e.value()}))}setAssignmentList(t){this.#t.length=0;for(let e of t)this.#t.push(new D({variable:e.variable(),value:e.value()}))}setVariables(t){this.#t.length=0;for(let e of t)this.#t.push(new D({variable:e,value:e.value()}))}addVariable(t,e=null){this.#t.push(new D({variable:t,value:e}))}apply(){for(let t of this.#t)t.apply()}clear(){this.#t.length=0}isEmpty(){return this.#t.length===0}size(){return this.#t.length}differenceSize(){let t=0;for(let e of this.#t)e.variable().value()!==e.value()&&++t;return t}at(t){return this.#t[t]}[Symbol.iterator](){return this.#t[Symbol.iterator]()}random(){return this.#t[Math.floor(Math.random()*this.#t.length)]}};var z=class a{static#t=-1;#e;#n=0;constructor(t){this.#e=new Array(t),this.#e.fill(a.#t)}hiddenSize(){return this.#n}hide(t,e){this.#e[t]===a.#t&&++this.#n,this.#e[t]=e}isEmpty(){return this.#e.length===this.#n}isValueHidden(t){return this.#e[t]!==a.#t}reveal(t){for(let e=0;e<this.#e.length;++e)this.#e[e]===t&&(this.#e[e]=a.#t,--this.#n)}revealAll(){this.#e.fill(a.#t),this.#n=0}};var P=class a extends g{static CONTINUE=0;static TERMINATE=1;#t;#e=new d;#n=[];#i=0;#r=0;#o=0;#a=!1;#u=0;#s;#h;#m;#c=!1;constructor(t,e=null){super(t),this.#t=[...this._pro.variables()],this.#s=new Array(this._pro.variableSize()),this.#p(),this.#m=new Array(this._pro.constraintSize());let i=[];for(let r of this._pro.constraints())r.size()===1&&i.push(r);this.#h=[...i],e&&(this.#i=e)}name(){return"Forward Checking for Fuzzy CSPs"}setUsingMinimumRemainingValuesHeuristics(t){this.#a=t}setIncrementStepOfWorstSatisfactionDegree(t){this.#u=t}setIntensivePruning(t){this.#c=t}setTargetRate(t=null){if(this._targetDeg=t,this._targetDeg===null)this.#i=0;else{let e=Number.MIN_VALUE;for(this.#i=this._targetDeg-e;this.#i>=this._targetDeg;)e*=10,this.#i=this._targetDeg-e}}#p(){this.#n=[];for(let t=0;t<this.#t.length;++t){this.#n.push(new Array(this.#t.length));for(let e=0;e<this.#t.length;++e)e<t&&(this.#n[t][e]=this._pro.constraintsBetween(this.#t[e],this.#t[t]))}}#l(t,e){return t<e?this.#n[e][t]:this.#n[t][e]}#f(){for(let t of this.#h){let e=t.at(0),i=e.value(),r=e.domain(),s=e.solverObject;for(let n=0,o=r.size();n<o;++n)e.assign(r.at(n)),t.satisfactionDegree()<=this.#i&&s.hide(n,-1);if(e.assign(i),s.isEmpty())return!1}return!0}#g(t,e,i){let r=e.domain(),s=e.solverObject;for(let n=0,o=r.size();n<o;++n)s.isValueHidden(n)||(e.assign(r.at(n)),i.satisfactionDegree()<=this.#i&&s.hide(n,t));return e.clear(),!s.isEmpty()}#S(t,e,i){let r=e.domain(),s=e.solverObject,n=null;for(let u of i)if(u.isEmpty()&&u!==e){n=u;break}let o=n.domain(),l=n.solverObject;t:for(let u=0,m=r.size();u<m;++u)if(!s.isValueHidden(u)){e.assign(r.at(u));for(let c=0,f=o.size();c<f;++c){if(l.isValueHidden(c))continue;if(n.assign(o.at(c)),i.satisfactionDegree()>this.#i)continue t}s.hide(u,t)}return n.clear(),e.clear(),!s.isEmpty()}#v(t,e,i){let r=e.domain(),s=e.solverObject,n=null,o=null;for(let f of i)if(f.isEmpty()&&f!==e)if(n===null)n=f;else{o=f;break}let l=n.domain(),u=o.domain(),m=n.solverObject,c=o.solverObject;t:for(let f=0,b=r.size();f<b;++f)if(!s.isValueHidden(f)){e.assign(r.at(f));for(let y=0,Z=l.size();y<Z;++y)if(!m.isValueHidden(y)){n.assign(l.at(y));for(let M=0,it=u.size();M<it;++M){if(c.isValueHidden(M))continue;if(o.assign(u.at(M)),i.satisfactionDegree()>this.#i)continue t}}s.hide(f,t)}return o.clear(),n.clear(),e.clear(),!s.isEmpty()}#V(t,e,i,r){let s=e.domain(),n=e.solverObject,o=new Array(r-1),l=0;for(let m of i)m.isEmpty()&&m!==e&&(o[l++]=m);let u=new Array(o.length);t:for(let m=0,c=s.size();m<c;++m)if(!n.isValueHidden(m)){e.assign(s.at(m)),u.fill(0);e:for(;;){let f=!1;for(let b=0;b<o.length;++b){let y=o[b].domain();if(o[b].solverObject.isValueHidden(u[b])){f=!0;break}o[b].assign(y.at(u[b]))}if(!f&&i.satisfactionDegree()>this.#i)continue t;for(let b=0;b<o.length&&(u[b]+=1,!(u[b]<o[b].domain().size()));++b)if(u[b]=0,b===o.length-1)break e}n.hide(m,t)}for(let m of o)m.clear();return e.clear(),!n.isEmpty()}#_(t,e){for(let i of this.#t){if(!i.isEmpty())continue;let r=this.#l(e,i.index());for(let s of r){let n=s.emptyVariableSize();if(n===1){if(!this.#g(t,i,s))return!1}else if(this.#c){if(n===2){if(!this.#S(t,i,s))return!1}else if(n===3){if(!this.#v(t,i,s))return!1}else if(n>3&&!this.#V(t,i,s,n))return!1}}}return!0}#D(t){this.#m.fill(!1);for(let e=0;e<this.#t.length;++e){let i=this.#t[e];if(i===t||i.isEmpty())continue;let r=this.#l(t.index(),e);for(let s of r){if(this.#m[s.index()])continue;let n=s.satisfactionDegree();if(n!==h.UNDEFINED&&n<=this.#i)return!1;this.#m[s.index()]=!0}}return!0}#z(){for(let t=0;t<this.#s.length;++t){let e=this.#s[t].index();for(let i=t+1;i<this.#s.length;++i){let r=this.#s[i],s=this.#l(e,r.index());for(let n of s){let o=r.value(),l=r.domain(),u=r.solverObject;for(let m=0,c=l.size();m<c;++m)u.isValueHidden(m)||(r.assign(l.at(m)),n.satisfactionDegree()<=this.#i&&u.hide(m,t));r.assign(o)}}}}#b(){let t=0,e=Number.MAX_VALUE;for(let i=0;i<this.#t.length;++i){let r=this.#t[i];if(!r.isEmpty())continue;let n=r.domain().size()-r.solverObject.hiddenSize();n<e&&(e=n,t=i)}return t}#d(t){let e=a.CONTINUE,i=this.#a?this.#b():t,r=this.#t[i],s=r.domain(),n=r.solverObject;this.#s[t]=r;for(let o=0,l=s.size();o<l;++o){if(n.isValueHidden(o))continue;if(this._iterLimit&&this._iterLimit<this.#r++||this.#o<Date.now()){e=a.TERMINATE;break}r.assign(s.at(o));for(let m of this.#t)m.solverObject.reveal(t);if(!this.#D(r)||!this.#_(t,i))continue;let u=t+1;if(e=u===this.#t.length-1?this.#y(u):this.#d(u),e===a.TERMINATE)break}if(e===a.CONTINUE)for(let o of this.#t)o.solverObject.reveal(t);return r.clear(),e}#y(t){let e=a.CONTINUE,i=this.#t[this.#a?this.#b():t],r=i.domain(),s=i.solverObject;this.#s[t]=i;for(let n=0,o=r.size();n<o;++n){if(s.isValueHidden(n))continue;if(this._iterLimit&&this._iterLimit<this.#r++||this.#o<Date.now()){e=a.TERMINATE;break}i.assign(r.at(n));let l=this._pro.worstSatisfactionDegree();if(l>this.#i){if(this.#i=l,this.#e.setProblem(this._pro),e=a.TERMINATE,this._targetDeg!==null&&this._targetDeg<=this.#i)break;this.#f(),this.#z()}}return i.clear(),e}exec(){this.#o=this._timeLimit===null?Number.MAX_VALUE:Date.now()+this._timeLimit,this.#r=0;for(let e of this.#t)e.solverObject=new z(e.domain().size());if(this._pro.clearAllVariables(),!this.#f())return!1;let t=!1;for(;;){if(this.#d(0)===a.TERMINATE){if(this._iterLimit&&this._iterLimit<this.#r++){this._debugOutput("stop: number of iterations has reached the limit");break}if(this.#o<Date.now()){this._debugOutput("stop: time limit has been reached");break}}if(this.#e.isEmpty())break;if(this._debugOutput(`	found a solution: ${this.#i}`),this.foundSolution(this.#e,this.#i)){t=!0;break}if(this._targetDeg===null)t=!0,this.#i+=this.#u;else if(this._targetDeg<=this.#i){this._debugOutput("stop: current degree is above the target"),t=!0;break}for(let i of this.#t)i.solverObject.revealAll()}this.#e.apply();for(let e of this.#t)e.solverObject=null;return t}};var N=class{#t;#e;#n={width:0,height:0};#i={x:0,y:0};_estMinSize={width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};_states=[];_cans=[];_baseCans=[];name(){return""}setParent(t){this.#t=t}getParent(){return this.#t}getVariable(){return this.#e}getEstimatedMinimumSize(){return{...this._estMinSize}}_getCandidateEntries(){return[]}_assignCandidates(t,e){e.length=0;for(let[i,r]of this._getCandidateEntries())t<=i&&e.push(r(this))}initializeProblem(t){this._assignCandidates(0,this._cans),this._baseCans=[...this._cans],this.#e=t.createVariable(_.create([0]),0,this.name()+": type"),t.createConstraint(e=>this.#r(e),[this.#e],this.name()+": type")}#r(t){return this._states.length===0?0:this._typeToCandidate(t).getDegree()}_typeToCandidate(t=null){return t===null&&this.#e&&(t=this.#e.value()),t!==null&&this._states[t]?this._cans[this._states[t].comb[0]]:null}isValid(){return!(!this.#e||this.#e.isEmpty()||!this._states[this.#e.value()])}getMinimumSize(){return{...this._states[this.#e.value()].size}}getMaximumSize(){return this._typeToCandidate().getMaximumSize()}getSize(){return{...this.#n}}setSize(t,e){this.#n={width:t,height:e}}getLocation(){return{...this.#i}}setLocation(t,e){this.#i={x:t,y:e}}};var S=class a extends N{static SAME_DIRECTION=.5;#t=[];name(){return this._typeToCandidate()?.name()??"layout"}add(t){t.setParent(this),this.#t.push(t)}children(){return this.#t}getDescendantSize(){let t=this.#t.length;for(let e of this.#t)e instanceof a&&(t+=e.getDescendantSize());return t}initializeProblem(t){super.initializeProblem(t);for(let e=0;e<this.#t.length;++e){let i=this.#t[e];i.initializeProblem(t),t.createConstraint((r,s)=>this.#e(e,r,s),[this.getVariable(),i.getVariable()],this.name()+": toChild"),i instanceof a&&t.createConstraint((r,s)=>this.#n(i,r,s),[this.getVariable(),i.getVariable()],this.name()+": toChild")}}#e(t,e,i){return this._states[e].comb[t+1]===i?1:0}#n(t,e,i){let r=this._typeToCandidate(e).getDirection(),s=t._typeToCandidate(i).getDirection();return r!==p.NO_DIR&&s!==p.NO_DIR&&r===s?a.SAME_DIRECTION:1}initializeEstimatedMinimumSize(){for(let i of this.#t)i.initializeEstimatedMinimumSize();let t=Number.MAX_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER;for(let i of this._cans){let r=i.getEstimatedMinimumSize(this.#t);t=Math.min(t,r.width),e=Math.min(e,r.height)}this._estMinSize={width:t,height:e}}initializeDomain(t){for(let n of this.#t)if(!n.initializeDomain(t))return!1;let e=new Array(this.#t.length+1).fill(0),i=new Array(this.#t.length+1).fill(0);i[0]=this._cans.length;for(let n=0;n<this.#t.length;++n)i[n+1]=this.#t[n]._states.length;let r=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;this._states.length=0;do{for(let o=0;o<this.#t.length;++o)this.#t[o].getVariable().assign(e[o+1]);let n=this._cans[e[0]].getMinimumSize(this.#t);this.getParent().checkGivenMaximumSize(this,n)&&(this._states.push({comb:[...e],size:n}),r=Math.min(r,n.width),s=Math.min(s,n.height))}while(this.#i(e,i));for(let n of this.#t)n.getVariable().clear();return this._estMinSize={width:r,height:s},this._states.length===0?!1:(this.getVariable().domain(t.createDomain(0,this._states.length-1)),!0)}#i(t,e){for(let i=0;i<t.length&&(t[i]++,!(t[i]<e[i]));++i){if(i===t.length-1)return!1;t[i]=0}return!0}checkGivenMaximumSize(t,e){for(let i of this._cans){let r=i.getEstimatedMinimumSizeIf(this.#t,t,e);if(this.getParent().checkGivenMaximumSize(this,r))return!0}return!1}setWorstDegree(t){if(this._assignCandidates(t,this._cans),this._cans.length===0)return!1;for(let e of this.#t)if(!e.setWorstDegree(t))return!1;return!0}addPossibleDegreesTo(t){for(let e of this._baseCans)t.add(e.getDegree());for(let e of this.#t)e.addPossibleDegreesTo(t);t.add(a.SAME_DIRECTION)}doLayout(){this._typeToCandidate().doLayout(this.#t,this.getSize())}};var H=class extends p{constructor(t,e){super(t,e,p.HORIZONTAL)}name(){return"horizontal array"}_calcSize(t){let e=0,i=0;for(let r of t)e+=r.width,i<r.height&&(i=r.height);return e+=(t.length-1)*1+2,i+=2,{width:e,height:i}}doLayout(t,e){let i=1;for(let r of t){let s=r.getMinimumSize(),n=r.getMaximumSize();r.setSize(s.width,Math.min(e.height-2,n.height)),r.setLocation(i,1),r instanceof S&&r.doLayout(),i+=r.getSize().width+1}}};var $=class extends p{constructor(t,e){super(t,e,p.VERTICAL)}name(){return"vertical array"}_calcSize(t){let e=0,i=0;for(let r of t)e<r.width&&(e=r.width),i+=r.height;return e+=2,i+=(t.length-1)*1+2,{width:e,height:i}}doLayout(t,e){let i=1;for(let r of t){let s=r.getMinimumSize(),n=r.getMaximumSize();r.setSize(Math.min(e.width-2,n.width),s.height),r.setLocation(1,i),r instanceof S&&r.doLayout(),i+=r.getSize().height+1}}};var G=class extends p{constructor(t,e){super(t,e,p.HORIZONTAL)}name(){return"left labeling"}_calcSize(t){let e=t[0].width+1+t[1].width+2,i=Math.max(t[0].height,t[1].height)+2;return{width:e,height:i}}doLayout(t,e){let i=t[0],r=t[1],s=i.getMinimumSize(),n=r.getMaximumSize();i.setSize(s.width,s.height),i.setLocation(1,1),r.setSize(Math.min(e.width-2-(s.width+1),n.width),Math.min(e.height-2,n.height)),r.setLocation(1+i.getSize().width+1,1),r instanceof S&&r.doLayout()}};var W=class extends p{#t=1;constructor(t,e){super(t,e,p.VERTICAL)}name(){return"top labeling"}_calcSize(t){let e=Math.max(t[0].width,t[1].width+this.#t)+2,i=t[0].height+1+t[1].height+2;return{width:e,height:i}}doLayout(t,e){let i=t[0],r=t[1],s=i.getMinimumSize(),n=r.getMaximumSize();i.setSize(s.width,s.height),i.setLocation(1,1),r.setSize(Math.min(e.width-2-this.#t,n.width),Math.min(e.height-2-(s.height+1),n.height)),r.setLocation(1+this.#t,1+i.getSize().height+1),r instanceof S&&r.doLayout()}};var V=class extends N{name(){return this._typeToCandidate()?.name()??"control"}initializeEstimatedMinimumSize(){let t=Number.MAX_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER;for(let i of this._cans){let r=i.getMinimumSize();t=Math.min(t,r.width),e=Math.min(e,r.height)}this._estMinSize={width:t,height:e}}initializeDomain(t){this._states.length=0;for(let e=0;e<this._cans.length;e+=1){let i=this._cans[e].getMinimumSize();this.getParent().checkGivenMaximumSize(this,i)&&this._states.push({comb:[e],size:i})}return this._states.length===0?!1:(this.getVariable().domain(t.createDomain(0,this._states.length-1)),!0)}setWorstDegree(t){return this._assignCandidates(t,this._cans),this._cans.length!==0}addPossibleDegreesTo(t){for(let e of this._baseCans)e.addPossibleDegreesTo(t)}};var q=class extends V{#t;#e;constructor(t,e){super(),this.#t=t,this.#e=e}name(){return"caption ("+super.name()+")"}_getCandidateEntries(){return[[1,t=>new L(t,1,this.#t)],[.8,t=>new L(t,.8,this.#e)]]}};var J=class extends V{#t;constructor(...t){super(),this.#t=t}name(){return"multiple ("+super.name()+")"}_getCandidateEntries(){let t=x.createVariableInstances(.75,.9,this.#t);return t.push([1,e=>new R(e,1,this.#t)]),t}};var K=class extends V{#t;constructor(...t){super(),this.#t=t}name(){return"single ("+super.name()+")"}_getCandidateEntries(){let t=x.createVariableInstances(.75,.9,this.#t);return t.push([1,e=>new w(e,1,this.#t)]),t}};var Q=class extends V{#t;#e;constructor(t,e){super(),this.#t=t,this.#e=e}name(){return"single boolean ("+super.name()+")"}_getCandidateEntries(){return[[.9,t=>new O(t,.9,this.#t)],[1,t=>new w(t,1,[this.#t,this.#e])]]}};var X=class extends S{constructor(t){if(super(),t.children)for(let e of t.children)this.add(e)}_getCandidateEntries(){return[[.98,t=>new H(t,.98)],[1,t=>new $(t,1)]]}};var tt=class extends S{constructor(t,e){super(),this.add(t),this.add(e)}_getCandidateEntries(){return[[1,t=>new G(t,1)],[.9,t=>new W(t,.9)]]}};var et=class a{static DEBUG=!0;static SORT_BY_DESCENDANT=!0;static SORT_BY_PATH_LENGTH=!0;#t;#e={width:0,height:0};#n=0;setRootContainer(t){this.#t=t;let e=this;this.#t.setParent(new class{checkGivenMaximumSize(i,r){let s=e.#e.height,n=e.#e.width;return r.height<=s&&r.width<=n}})}getRootContainer(){return this.#t}getLastSatisfactionDegree(){return this.#n}layoutContainer(t){return!!this.#i(t)}#i(t){this.#e={...t};let e=new T;this.#t.initializeProblem(e),this.#a(e);let i=new Set;return this.#t.addPossibleDegreesTo(i),this.#r(e,i)?(this.#t.setSize(this.#e.width,this.#e.height),this.#t.setLocation(0,0),this.#t.doLayout(),!0):!1}#r(t,e){let i=0;a.DEBUG&&(console.log(`
solveProblem - started`),i=Date.now());let r=!1,s=[...e.values()].sort((n,o)=>o-n);for(let n of s){if(n<=0||(a.DEBUG&&console.log(`	Iteration in wsd ${n}`),!this.#o(t,n)))continue;let o=new(void 0);if(o.setTarget(n),o.setTimeLimit(100),new P().solve(t,o)){r=!0,this.#n=n;break}}return a.DEBUG&&(console.log(`solveProblem - finished (${r}, wsd = ${t.degree()})
`),console.log(`time: ${Date.now()-i}`)),r}#o(t,e){return!this.#t.setWorstDegree(e)||(this.#t.initializeEstimatedMinimumSize(),!this.#t.initializeDomain(t))?(console.log("Failure: initializeDomain"),!1):!0}#a(t){let e=(void 0)(t),i=[this.#t.getVariable()],r=[this.#t];for(;r.length>0;){let s=[];for(let n of r)for(let o of n.children())o instanceof S&&s.push(o);this.#u(s,e);for(let n of s)i.push(n.getVariable());r=s}t.sortVariables((s,n)=>i.indexOf(s)-i.indexOf(n))}#u(t,e){t.sort((i,r)=>{if(a.SORT_BY_DESCENDANT){let s=i.getDescendantSize(),o=r.getDescendantSize()-s;if(o!==0)return o}if(a.SORT_BY_PATH_LENGTH){let s=e[i.getVariable().index()];return e[r.getVariable().index()]-s}return 0})}};export{Y as Button,q as Caption,O as Checkbox,R as Checkboxes,v as Control,V as FControl,N as FElement,S as FLayout,et as FlexibleLayout,X as Group,H as HorizontalArray,L as Label,tt as Labeling,p as Layout,G as LeftLabeling,x as ListBox,J as Multiple,w as RadioButtons,K as Single,Q as SingleBoolean,W as TopLabeling,$ as VerticalArray};
//# sourceMappingURL=fwl.min.js.map
