var Ie=Object.defineProperty;var oe=h=>{throw TypeError(h)};var Ne=(h,t,e)=>t in h?Ie(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var M=(h,t,e)=>Ne(h,typeof t!="symbol"?t+"":t,e),qt=(h,t,e)=>t.has(h)||oe("Cannot "+e);var i=(h,t,e)=>(qt(h,t,"read from private field"),e?e.call(h):t.get(h)),a=(h,t,e)=>t.has(h)?oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),l=(h,t,e,s)=>(qt(h,t,"write to private field"),s?s.call(h,e):t.set(h,e),e),z=(h,t,e)=>(qt(h,t,"access private method"),e);var pt=(h,t,e,s)=>({set _(n){l(h,t,n,e)},get _(){return i(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var it,St,wt;class Zt{constructor(t,e){a(this,it);a(this,St,{width:0,height:0});a(this,wt,{width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER});M(this,"_owner");this._owner=t,l(this,it,e)}getDegree(){return i(this,it)}addPossibleDegreesTo(t){t.add(i(this,it))}setMinimumSize(t){l(this,St,{...t})}getMinimumSize(){return{...i(this,St)}}setMaximumSize(t){l(this,wt,{...t})}getMaximumSize(){return{...i(this,wt)}}}it=new WeakMap,St=new WeakMap,wt=new WeakMap;var bt;class De extends Zt{constructor(e,s,n){super(e,s);a(this,bt);l(this,bt,n);const r={width:i(this,bt).length+2,height:1};this.setMinimumSize(r),this.setMaximumSize(r)}name(){return"checkbox"}}bt=new WeakMap;var zt;class he extends Zt{constructor(e,s,n){super(e,s);a(this,zt);l(this,zt,n);const r={width:i(this,zt).length,height:1};this.setMinimumSize(r),this.setMaximumSize(r)}name(){return"label"}}zt=new WeakMap;var Wt;const T=class T extends Zt{constructor(e,s,n,r=n.length){super(e,s);a(this,Wt);l(this,Wt,[...n]);const o=Math.min(r,T.MIN_ITEM_SIZE)*1;let u=0;for(const d of n)u=Math.max(u,d.length);this.setMinimumSize({width:u+1,height:o}),this.setMaximumSize({width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER})}static createVariableInstances(e,s,n){if(n.length<=T.MIN_ITEM_SIZE)return[[s,u=>new T(u,s,n,T.MIN_ITEM_SIZE)]];const r=[],o=s-e;for(let u=T.MIN_ITEM_SIZE+1;u<n.length;++u){const d=s+o*(u/n.length-1),O=u;r.push([d,D=>new T(D,d,n,O)])}return r}name(){return"list box"}};Wt=new WeakMap,M(T,"MIN_ITEM_SIZE",4);let Qt=T;var Yt;class le extends Zt{constructor(e,s,n){super(e,s);a(this,Yt);l(this,Yt,[...n]);let r=0;for(const u of n)r=Math.max(r,u.length);const o={width:r+1,height:n.length*1};this.setMinimumSize(o),this.setMaximumSize(o)}name(){return"radio buttons"}}Yt=new WeakMap;var yt,Mt,_t;const Q=class Q{constructor(t,e,s=Q.NO_DIR){a(this,yt);a(this,Mt);a(this,_t);l(this,yt,t),l(this,Mt,e),l(this,_t,s)}getOwner(){return i(this,yt)}getDegree(){return i(this,Mt)}getDirection(){return i(this,_t)}getEstimatedMinimumSize(t){const e=t.map(s=>s.getEstimatedMinimumSize());return this._calcSize(e)}getEstimatedMinimumSizeIf(t,e,s){const n=t.map(r=>e===r?s:r.getEstimatedMinimumSize());return this._calcSize(n)}getMinimumSize(t){const e=t.map(s=>s.getMinimumSize());return this._calcSize(e)}getMaximumSize(){return{width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER}}};yt=new WeakMap,Mt=new WeakMap,_t=new WeakMap,M(Q,"NO_DIR",-1),M(Q,"VERTICAL",0),M(Q,"HORIZONTAL",1);let v=Q;var st,nt;class ce{constructor(){a(this,st);a(this,nt);l(this,st,-1),l(this,nt,""),this.userObject=null}setIndex(t){l(this,st,t)}setName(t){l(this,nt,t)}index(){return i(this,st)}name(){return i(this,nt)}}st=new WeakMap,nt=new WeakMap;var rt;const tt=class tt extends ce{constructor(t){super(),this.es=[],this.v=i(tt,rt),this.d=t}toString(){const t=this.name(),e=t?`(${t})`:"",s=this.isEmpty()?"<empty>":""+this.value();return`x${this.index()}${e} = ${s}`}size(){return this.es.length}at(t){return this.es.at(t)}has(t){return this.es.includes(t)}indexOf(t){return this.es.indexOf(t)}neighbors(){const t=[];for(const e of this.es)for(const s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.es[Symbol.iterator]()}connect(t){if(this.es.includes(t))throw new RangeError;this.es.push(t)}disconnect(t){if(!this.es.includes(t))throw new RangeError;this.es=this.es.filter(e=>e!==t)}domain(t){if(t===void 0)return this.d;this.d=t,this.clear()}assign(t){this.v=t}clear(){this.assign(i(tt,rt))}value(){return this.v}isEmpty(){return this.value()===i(tt,rt)}};rt=new WeakMap,a(tt,rt,Number.MIN_VALUE);let Et=tt;class et{static create(t,e=null){if(Array.isArray(t))return new Te(t);if(e!==null)return new Le(t,e);throw new RangeError}}var L;class Te extends et{constructor(e){super();a(this,L);l(this,L,[...e])}contains(e){return i(this,L).includes(e)}indexOf(e){return i(this,L).indexOf(e)}size(){return i(this,L).length}at(e){return i(this,L)[e]}[Symbol.iterator](){return i(this,L)[Symbol.iterator]()}}L=new WeakMap;var I,X;class Le extends et{constructor(e,s){super();a(this,I);a(this,X);l(this,I,e|0),l(this,X,s|0)}contains(e){return i(this,I)<=e&&e<=i(this,X)}indexOf(e){return i(this,I)<=e&&e<=i(this,X)?e-i(this,I):-1}size(){return i(this,X)-i(this,I)+1}at(e){return i(this,I)+e}[Symbol.iterator](){let e=i(this,I);const s=i(this,X);return{next(){return e<=s?{value:e++,done:!1}:{value:null,done:!0}}}}}I=new WeakMap,X=new WeakMap;class kt extends ce{constructor(t){super(),this.es=[],this.r=t}static create(t,e){return e.length===1?new Re(t,e[0]):e.length===2?new Ve(t,e[0],e[1]):e.length===3?new Oe(t,e[0],e[1],e[2]):new Pe(t,...e)}toString(){const t=this.name(),e=t?`(${t})`:"",s=this.degree(),n=s<0?"UNDEFINED":""+s;return`c${this.index()}${e} = ${n}`}size(){return this.es.length}at(t){return this.es.at(t)}has(t){return this.es.includes(t)}indexOf(t){return this.es.indexOf(t)}neighbors(){const t=[];for(const e of this.es)for(const s of e)s!==this&&t.push(s);return t}[Symbol.iterator](){return this.es[Symbol.iterator]()}relation(){return this.r}}class Re extends kt{constructor(t,e){super(t),this.es=[e]}emptySize(){return this.es[0].isEmpty()?1:0}isDefined(){return!this.es[0].isEmpty()}status(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())===1?1:0}degree(){return this.es[0].isEmpty()?-1:this.r(this.es[0].value())}}class Ve extends kt{constructor(t,e,s){super(t),this.es=[e,s]}emptySize(){let t=0;return this.es[0].isEmpty()&&++t,this.es[1].isEmpty()&&++t,t}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value())}}class Oe extends kt{constructor(t,e,s,n){super(t),this.es=[e,s,n]}emptySize(){let t=0;return this.es[0].isEmpty()&&++t,this.es[1].isEmpty()&&++t,this.es[2].isEmpty()&&++t,t}isDefined(){return!this.es[0].isEmpty()&&!this.es[1].isEmpty()&&!this.es[2].isEmpty()}status(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())===1?1:0}degree(){return this.es[0].isEmpty()||this.es[1].isEmpty()||this.es[2].isEmpty()?-1:this.r(this.es[0].value(),this.es[1].value(),this.es[2].value())}}var G;class Pe extends kt{constructor(e,...s){super(e);a(this,G);this.es=[...s],l(this,G,new Array(this.es.length))}emptySize(){let e=0;for(const s of this.es)e+=s.isEmpty()?1:0;return e}isDefined(){for(const e of this.es)if(e.isEmpty())return!1;return!0}status(){for(let e=0;e<this.es.length;++e){const s=this.es[e];if(s.isEmpty())return-1;i(this,G)[e]=s.value()}return this.r(...i(this,G))===1?1:0}degree(){for(let e=0;e<this.es.length;++e){const s=this.es[e];if(s.isEmpty())return-1;i(this,G)[e]=s.value()}return this.r(...i(this,G))}}G=new WeakMap;var ot,xt,S,m;class Fe{constructor(){a(this,ot,t=>new Et(t));a(this,xt,(t,e)=>kt.create(t,e));a(this,S,[]);a(this,m,[])}setVariableFactory(t){l(this,ot,t)}setConstraintFactory(t){l(this,xt,t)}addVariable(t){t.setIndex(i(this,S).length),i(this,S).push(t)}createDomain(t,e=null){if(Array.isArray(t))return et.create(t);if(e!==null)return et.create(t,e);throw new RangeError}createVariable(t,e=null,s){if(t instanceof Et){const n=i(this,ot).call(this,t.domain());return this.addVariable(n),n.setName(n.name()),n.assign(n.value()),n}else if(t instanceof et){if(e!==null&&!t.contains(e))throw new Error;const n=i(this,ot).call(this,t);return this.addVariable(n),e!==null&&n.assign(e),s&&n.setName(s),n}throw new RangeError}createConstraint(t,e,s){const n=i(this,xt).call(this,t,e);n.setIndex(i(this,m).length),i(this,m).push(n);for(const r of e)r.connect(n);return s&&n.setName(s),n}removeConstraint(t){const e=i(this,m).indexOf(t);i(this,m).splice(e,1);for(let s=e;s<i(this,m).length;++s)i(this,m)[s].setIndex(s);for(const s of t)s.disconnect(t)}clearAllVariables(){for(const t of i(this,S))t.clear()}reverseVariables(){i(this,S).reverse();for(let t=0;t<i(this,S).length;++t)i(this,S)[t].setIndex(t)}sortVariables(t){i(this,S).sort(t);for(let e=0;e<i(this,S).length;++e)i(this,S)[e].setIndex(e)}variables(){return i(this,S)}variableSize(){return i(this,S).length}variableAt(t){return i(this,S)[t]}variableOf(t){for(const e of i(this,S))if(e.name()===t)return e;return null}hasVariable(t){return i(this,S).includes(t)}constraints(){return i(this,m)}constraintSize(){return i(this,m).length}constraintAt(t){return i(this,m)[t]}constraintOf(t){for(const e of i(this,m))if(e.name()===t)return e;return null}hasConstraint(t){return i(this,m).includes(t)}constraintsBetween(t,e){const s=[];for(const n of t)n.has(e)&&s.push(n);return s}constraintDensity(){return i(this,m).length/i(this,S).length}emptySize(){let t=0;for(const e of i(this,S))t+=e.isEmpty()?1:0;return t}hasEmptyDomain(){for(const t of i(this,S))if(t.domain().size()===0)return!0;return!1}degree(){let t=1;for(const e of i(this,m)){const s=e.degree();if(s<0)return s;s<t&&(t=s)}return t}constraintsWithDegree(){const t=[];let e=1;for(const s of i(this,m)){const n=s.degree();n<e?(e=n,t.length=0,t.push(s)):n-e<Number.MIN_VALUE*10&&t.push(s)}return[t,e]}averageDegree(){let t=0;for(const e of i(this,m))t+=e.degree();return t/i(this,m).length}ratio(){return this.satisfiedConstraintSize()/i(this,m).length}satisfiedConstraintSize(){let t=0;for(const e of i(this,m))t+=e.status()===1?1:0;return t}violatingConstraintSize(){return i(this,m).length-this.satisfiedConstraintSize()}satisfiedConstraints(){const t=[];for(const e of i(this,m))e.status()===1&&t.push(e);return t}violatingConstraints(){const t=[];for(const e of i(this,m))e.status()===0&&t.push(e);return t}}ot=new WeakMap,xt=new WeakMap,S=new WeakMap,m=new WeakMap;var ht,At,vt,Ct,at,k,ut,It,Nt,Dt,Tt;class fe{constructor(){a(this,ht,!0);a(this,At,t=>console.log(t));a(this,vt,()=>!1);a(this,Ct,Number.MAX_SAFE_INTEGER);a(this,at,null);a(this,k,.8);a(this,ut,null);a(this,It,0);a(this,Nt,0);a(this,Dt,-1);a(this,Tt,0)}initialize(){l(this,It,i(this,at)===null?Number.MAX_VALUE:Date.now()+i(this,at)),l(this,Nt,0)}check(t=null){if(t!==null&&i(this,k)!==null&&i(this,k)<=t)return this.outputDebugString("Stop: Current evaluation value is above the target"),!0;if(i(this,Ct)<pt(this,Nt)._++)return this.outputDebugString("Stop: Number of iterations has reached the limit"),!1;if(i(this,It)<Date.now())return this.outputDebugString("Stop: Time limit has been reached"),!1;if(t!==null&&i(this,ut)!==null)if(t!==-1&&i(this,Dt)===t){if(i(this,ut)<pt(this,Tt)._++)return this.outputDebugString("Stop: Evaluation value has not changed for a certain number of times"),!1}else l(this,Dt,t),l(this,Tt,0);return null}solutionFound(t,e){return i(this,vt).call(this,t,e)}outputDebugString(t){i(this,ht)&&i(this,At).call(this,t)}isDebugMode(){return i(this,ht)}isTargetAssigned(){return i(this,k)!==null}getTarget(){return i(this,k)}setIterationLimit(t=null){l(this,Ct,t===null?Number.MAX_SAFE_INTEGER:t)}setTimeLimit(t=null){l(this,at,t)}setTarget(t=null){l(this,k,t)}setSameEvaluationLimit(t=null){l(this,ut,t)}setListener(t){l(this,vt,t)}setDebugMode(t){l(this,ht,t)}setDebugOutput(t){l(this,At,t)}}ht=new WeakMap,At=new WeakMap,vt=new WeakMap,Ct=new WeakMap,at=new WeakMap,k=new WeakMap,ut=new WeakMap,It=new WeakMap,Nt=new WeakMap,Dt=new WeakMap,Tt=new WeakMap;class Xe{constructor(){}name(){return""}solve(t,e=new fe){this.pro=t,this.monitor=e,this.preprocess();const s=this.exec();return this.postprocess(),s}preprocess(){}exec(){return!1}postprocess(){}}var $,U;const ne=class ne{constructor(t,e=null){a(this,$);a(this,U);if(t instanceof ne)l(this,$,t.variable()),l(this,U,t.value());else if(t instanceof Et)l(this,$,t),l(this,U,e??t.value());else throw new RangeError}apply(){i(this,$).assign(i(this,U))}toString(){return`v${i(this,$).index()} <- ${i(this,U)}`}value(){return i(this,U)}variable(){return i(this,$)}};$=new WeakMap,U=new WeakMap;let J=ne,ae=Math.random;function Ge(h){return console.log(ae===Math.random),Math.floor(ae()*h)}var w;const re=class re{constructor(){a(this,w,[])}static fromVariables(t){const e=new re;return e.setVariables(t),e}setProblem(t){i(this,w).length=0;for(const e of t.variables())i(this,w).push(new J(e))}setAssignmentList(t){i(this,w).length=0;for(const e of t)i(this,w).push(new J(e))}setVariables(t){i(this,w).length=0;for(const e of t)i(this,w).push(new J(e))}addVariable(t,e=null){i(this,w).push(new J(t,e))}apply(){for(const t of i(this,w))t.apply()}clear(){i(this,w).length=0}isEmpty(){return i(this,w).length===0}size(){return i(this,w).length}differenceSize(){let t=0;for(const e of i(this,w))e.variable().value()!==e.value()&&++t;return t}at(t){return i(this,w)[t]}[Symbol.iterator](){return i(this,w)[Symbol.iterator]()}random(){return i(this,w)[Ge(i(this,w).length)]}};w=new WeakMap;let te=re;var W,_,Y;const F=class F{constructor(t){a(this,_);a(this,Y,0);l(this,_,new Array(t)),i(this,_).fill(i(F,W))}prunedSize(){return i(this,Y)}prune(t,e){if(i(this,_)[t]===i(F,W))++pt(this,Y)._;else throw new Error;i(this,_)[t]=e}isEmpty(){return i(this,_).length===i(this,Y)}isPruned(t){return i(this,_)[t]!==i(F,W)}recover(t){for(let e=0;e<i(this,_).length;++e)i(this,_)[e]===t&&(i(this,_)[e]=i(F,W),--pt(this,Y)._)}recoverAll(){i(this,_).fill(i(F,W)),l(this,Y,0)}};W=new WeakMap,_=new WeakMap,Y=new WeakMap,a(F,W,Number.MIN_SAFE_INTEGER);let ee=F;function ke(h,t){let e=0,s=Number.MAX_VALUE;for(let n=0;n<h.length;++n){const r=h[n];if(!r.isEmpty())continue;const u=r.domain().size()-t[r.index()].prunedSize();u<s&&(s=u,e=n)}return e}function $e(h,t){const e=[];for(let s=0;s<t.length;++s){e.push(new Array(t.length));for(let n=0;n<t.length;++n)n<s&&(e[s][n]=h.constraintsBetween(t[n],t[s]))}return e}function Ue(h){const t=new Array(h.variableSize());for(const e of h.variables())t[e.index()]=We(h,e);return t}function We(h,t){const e=new Array(h.variableSize());e.fill(Number.MAX_VALUE);const s=new Set;s.add(t),e[t.index()]=0,de(h,t,e,0,s);let n=0,r=0;for(let o=0;o<e.length;++o)e[o]!==Number.MAX_VALUE&&o!==t.index()&&(++n,r+=e[o]);return n===0?0:r/n}function de(h,t,e,s,n){const r=[];for(const o of t)for(const u of o)e[u.index()]===Number.MAX_VALUE&&(r.push(u),e[u.index()]=s+1);for(const o of r)n.add(o);for(const o of r)de(h,o,e,s+1,n)}var R,lt,V,j,H,ct,Lt,x,ie,me,ge,pe,Ee;class Ye extends Xe{constructor(){super();a(this,x);a(this,R);a(this,lt);a(this,V);a(this,j);a(this,H);a(this,ct);a(this,Lt,!0)}setUsingMinimumRemainingValuesHeuristics(e){l(this,Lt,e)}name(){return"Fuzzy Forward Checking"}preprocess(){l(this,R,[...this.pro.variables()]),l(this,lt,$e(this.pro,i(this,R))),l(this,V,Array.from(i(this,R),e=>new ee(e.domain().size()))),l(this,j,new te),l(this,H,0),this.monitor.initialize()}exec(){let e=null;for(;e===null;)l(this,ct,!1),this.pro.clearAllVariables(),e=z(this,x,ie).call(this,0),i(this,j).apply();return e===!0}}R=new WeakMap,lt=new WeakMap,V=new WeakMap,j=new WeakMap,H=new WeakMap,ct=new WeakMap,Lt=new WeakMap,x=new WeakSet,ie=function(e,s=1){if(e===this.pro.variableSize()){const d=this.pro.degree();return i(this,j).setProblem(this.pro),this.monitor.outputDebugString(`	Evaluation ${d}`),i(this,H)<d&&(l(this,H,d),l(this,ct,!0),this.monitor.solutionFound(i(this,j),d))?!0:this.monitor.check(d)}let n=null;if((n=this.monitor.check())!==null)return n;const r=i(this,R)[i(this,Lt)?ke(i(this,R),i(this,V)):e],o=r.domain(),u=i(this,V)[r.index()];for(let d=0,O=o.size();d<O;++d){if(u.isPruned(d))continue;r.assign(o.at(d));const D=Math.min(s,z(this,x,Ee).call(this,r));if(!(D<=i(this,H))){if(z(this,x,me).call(this,e,r)&&(n=z(this,x,ie).call(this,e+1,D),n!==null||i(this,ct)))break;for(const gt of i(this,V))gt.recover(e)}}if(n===null){for(const d of i(this,V))d.recover(e);r.clear()}return n},me=function(e,s){for(const n of i(this,R)){if(!n.isEmpty())continue;const r=z(this,x,ge).call(this,s.index(),n.index()),o=i(this,V)[n.index()],u=n.domain();for(const d of r)if(d.emptySize()===1&&!z(this,x,pe).call(this,e,n,u,o,d))return!1}return!0},ge=function(e,s){return e<s?i(this,lt)[s][e]:i(this,lt)[e][s]},pe=function(e,s,n,r,o){for(let u=0,d=n.size();u<d;++u)r.isPruned(u)||(s.assign(n.at(u)),o.degree()<=i(this,H)&&r.prune(u,e));return s.clear(),!r.isEmpty()},Ee=function(e){let s=Number.MAX_VALUE;for(const n of e){const r=n.degree();0<=r&&r<s&&(s=r)}return s};var Rt,A,Vt,Ot,Ht,we;class Se{constructor(){a(this,Ht);a(this,Rt);a(this,A);a(this,Vt,{width:0,height:0});a(this,Ot,{x:0,y:0});M(this,"_estMinSize",{width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER});M(this,"_states",[]);M(this,"_cans",[]);M(this,"_baseCans",[])}name(){return""}setParent(t){l(this,Rt,t)}getParent(){return i(this,Rt)}getVariable(){return i(this,A)}getEstimatedMinimumSize(){return{...this._estMinSize}}_getCandidateEntries(){return[]}_assignCandidates(t,e){e.length=0;for(const[s,n]of this._getCandidateEntries())t<=s&&e.push(n(this))}initializeProblem(t){this._assignCandidates(0,this._cans),this._baseCans=[...this._cans],l(this,A,t.createVariable(et.create([0]),0,this.name()+": type")),t.createConstraint(e=>z(this,Ht,we).call(this,e),[i(this,A)],this.name()+": type")}_typeToCandidate(t=null){return t===null&&i(this,A)&&(t=i(this,A).value()),t!==null&&this._states[t]?this._cans[this._states[t].comb[0]]:null}isValid(){return!(!i(this,A)||i(this,A).isEmpty()||!this._states[i(this,A).value()])}getMinimumSize(){return{...this._states[i(this,A).value()].size}}getMaximumSize(){return this._typeToCandidate().getMaximumSize()}getSize(){return{...i(this,Vt)}}setSize(t,e){l(this,Vt,{width:t,height:e})}getLocation(){return{...i(this,Ot)}}setLocation(t,e){l(this,Ot,{x:t,y:e})}}Rt=new WeakMap,A=new WeakMap,Vt=new WeakMap,Ot=new WeakMap,Ht=new WeakSet,we=function(t){return this._states.length===0?0:this._typeToCandidate(t).getDegree()};var g,B,be,ze,ye;const q=class q extends Se{constructor(){super(...arguments);a(this,B);a(this,g,[])}name(){const e=this._typeToCandidate();return(e==null?void 0:e.name())??"layout"}add(e){e.setParent(this),i(this,g).push(e)}children(){return i(this,g)}getDescendantSize(){let e=i(this,g).length;for(const s of i(this,g))s instanceof q&&(e+=s.getDescendantSize());return e}initializeProblem(e){super.initializeProblem(e);for(let s=0;s<i(this,g).length;++s){const n=i(this,g)[s];n.initializeProblem(e),e.createConstraint((r,o)=>z(this,B,be).call(this,s,r,o),[this.getVariable(),n.getVariable()],this.name()+": toChild"),n instanceof q&&e.createConstraint((r,o)=>z(this,B,ze).call(this,n,r,o),[this.getVariable(),n.getVariable()],this.name()+": toChild")}}initializeEstimatedMinimumSize(){for(const n of i(this,g))n.initializeEstimatedMinimumSize();let e=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(const n of this._cans){const r=n.getEstimatedMinimumSize(i(this,g));e=Math.min(e,r.width),s=Math.min(s,r.height)}this._estMinSize={width:e,height:s}}initializeDomain(e){for(const u of i(this,g))if(!u.initializeDomain(e))return!1;const s=new Array(i(this,g).length+1).fill(0),n=new Array(i(this,g).length+1).fill(0);n[0]=this._cans.length;for(let u=0;u<i(this,g).length;++u)n[u+1]=i(this,g)[u]._states.length;let r=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;this._states.length=0;do{for(let d=0;d<i(this,g).length;++d)i(this,g)[d].getVariable().assign(s[d+1]);const u=this._cans[s[0]].getMinimumSize(i(this,g));this.getParent().checkGivenMaximumSize(this,u)&&(this._states.push({comb:[...s],size:u}),r=Math.min(r,u.width),o=Math.min(o,u.height))}while(z(this,B,ye).call(this,s,n));for(const u of i(this,g))u.getVariable().clear();return this._estMinSize={width:r,height:o},this._states.length===0?!1:(this.getVariable().domain(e.createDomain(0,this._states.length-1)),!0)}checkGivenMaximumSize(e,s){for(const n of this._cans){const r=n.getEstimatedMinimumSizeIf(i(this,g),e,s);if(this.getParent().checkGivenMaximumSize(this,r))return!0}return!1}setWorstDegree(e){if(this._assignCandidates(e,this._cans),this._cans.length===0)return!1;for(const s of i(this,g))if(!s.setWorstDegree(e))return!1;return!0}addPossibleDegreesTo(e){for(const s of this._baseCans)e.add(s.getDegree());for(const s of i(this,g))s.addPossibleDegreesTo(e);e.add(q.SAME_DIRECTION)}doLayout(){this._typeToCandidate().doLayout(i(this,g),this.getSize())}};g=new WeakMap,B=new WeakSet,be=function(e,s,n){return this._states[s].comb[e+1]===n?1:0},ze=function(e,s,n){const r=this._typeToCandidate(s).getDirection(),o=e._typeToCandidate(n).getDirection();return r!==v.NO_DIR&&o!==v.NO_DIR&&r===o?q.SAME_DIRECTION:1},ye=function(e,s){for(let n=0;n<e.length&&(e[n]++,!(e[n]<s[n]));++n){if(n===e.length-1)return!1;e[n]=0}return!0},M(q,"SAME_DIRECTION",.5);let N=q;class He extends v{constructor(t,e){super(t,e,v.HORIZONTAL)}name(){return"horizontal array"}_calcSize(t){let e=0,s=0;for(const n of t)e+=n.width,s<n.height&&(s=n.height);return e+=(t.length-1)*1+2,s+=2,{width:e,height:s}}doLayout(t,e){let s=1;for(const n of t){const r=n.getMinimumSize(),o=n.getMaximumSize();n.setSize(r.width,Math.min(e.height-2,o.height)),n.setLocation(s,1),n instanceof N&&n.doLayout(),s+=n.getSize().width+1}}}class Ze extends v{constructor(t,e){super(t,e,v.VERTICAL)}name(){return"vertical array"}_calcSize(t){let e=0,s=0;for(const n of t)e<n.width&&(e=n.width),s+=n.height;return e+=2,s+=(t.length-1)*1+2,{width:e,height:s}}doLayout(t,e){let s=1;for(const n of t){const r=n.getMinimumSize(),o=n.getMaximumSize();n.setSize(Math.min(e.width-2,o.width),r.height),n.setLocation(1,s),n instanceof N&&n.doLayout(),s+=n.getSize().height+1}}}class Be extends v{constructor(t,e){super(t,e,v.HORIZONTAL)}name(){return"left labeling"}_calcSize(t){const e=t[0].width+1+t[1].width+2,s=Math.max(t[0].height,t[1].height)+2;return{width:e,height:s}}doLayout(t,e){const s=t[0],n=t[1],r=s.getMinimumSize(),o=n.getMaximumSize();s.setSize(r.width,r.height),s.setLocation(1,1),n.setSize(Math.min(e.width-2-(r.width+1),o.width),Math.min(e.height-2,o.height)),n.setLocation(1+s.getSize().width+1,1),n instanceof N&&n.doLayout()}}var ft;class Ke extends v{constructor(e,s){super(e,s,v.VERTICAL);a(this,ft,1)}name(){return"top labeling"}_calcSize(e){const s=Math.max(e[0].width,e[1].width+i(this,ft))+2,n=e[0].height+1+e[1].height+2;return{width:s,height:n}}doLayout(e,s){const n=e[0],r=e[1],o=n.getMinimumSize(),u=r.getMaximumSize();n.setSize(o.width,o.height),n.setLocation(1,1),r.setSize(Math.min(s.width-2-i(this,ft),u.width),Math.min(s.height-2-(o.height+1),u.height)),r.setLocation(1+i(this,ft),1+n.getSize().height+1),r instanceof N&&r.doLayout()}}ft=new WeakMap;class se extends Se{name(){const t=this._typeToCandidate();return(t==null?void 0:t.name())??"control"}initializeEstimatedMinimumSize(){let t=Number.MAX_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER;for(const s of this._cans){const n=s.getMinimumSize();t=Math.min(t,n.width),e=Math.min(e,n.height)}this._estMinSize={width:t,height:e}}initializeDomain(t){this._states.length=0;for(let e=0;e<this._cans.length;e+=1){const s=this._cans[e].getMinimumSize();this.getParent().checkGivenMaximumSize(this,s)&&this._states.push({comb:[e],size:s})}return this._states.length===0?!1:(this.getVariable().domain(t.createDomain(0,this._states.length-1)),!0)}setWorstDegree(t){return this._assignCandidates(t,this._cans),this._cans.length!==0}addPossibleDegreesTo(t){for(const e of this._baseCans)e.addPossibleDegreesTo(t)}}var Pt,Ft;class ue extends se{constructor(e,s){super();a(this,Pt);a(this,Ft);l(this,Pt,e),l(this,Ft,s)}name(){return"caption ("+super.name()+")"}_getCandidateEntries(){return[[1,e=>new he(e,1,i(this,Pt))],[.8,e=>new he(e,.8,i(this,Ft))]]}}Pt=new WeakMap,Ft=new WeakMap;var dt;class jt extends se{constructor(...e){super();a(this,dt);l(this,dt,e)}name(){return"single ("+super.name()+")"}_getCandidateEntries(){const e=Qt.createVariableInstances(.75,.9,i(this,dt));return e.push([1,s=>new le(s,1,i(this,dt))]),e}}dt=new WeakMap;var mt,Xt;class qe extends se{constructor(e,s){super();a(this,mt);a(this,Xt);l(this,mt,e),l(this,Xt,s)}name(){return"single boolean ("+super.name()+")"}_getCandidateEntries(){return[[.9,e=>new De(e,.9,i(this,mt))],[1,e=>new le(e,1,[i(this,mt),i(this,Xt)])]]}}mt=new WeakMap,Xt=new WeakMap;class Jt extends N{constructor(t){if(super(),t.children)for(const e of t.children)this.add(e)}_getCandidateEntries(){return[[.98,t=>new He(t,.98)],[1,t=>new Ze(t,1)]]}}class je extends N{constructor(t,e){super(),this.add(t),this.add(e)}_getCandidateEntries(){return[[1,t=>new Be(t,1)],[.9,t=>new Ke(t,.9)]]}}var y,Z,Gt,C,Me,_e,xe,Ae,ve;class Ut{constructor(){a(this,C);a(this,y);a(this,Z,{width:0,height:0});a(this,Gt)}setRootContainer(t){l(this,y,t);const e=this;i(this,y).setParent(new class{checkGivenMaximumSize(s,n){const r=i(e,Z).height,o=i(e,Z).width;return n.height<=r&&n.width<=o}})}getRootContainer(){return i(this,y)}getLastSatisfactionDegree(){return i(this,Gt)}layoutContainer(t){return!!z(this,C,Me).call(this,t)}}y=new WeakMap,Z=new WeakMap,Gt=new WeakMap,C=new WeakSet,Me=function(t){l(this,Z,{...t});const e=new Fe;i(this,y).initializeProblem(e),z(this,C,Ae).call(this,e);const s=new Set;return i(this,y).addPossibleDegreesTo(s),z(this,C,_e).call(this,e,s)?(i(this,y).setSize(i(this,Z).width,i(this,Z).height),i(this,y).setLocation(0,0),i(this,y).doLayout(),!0):!1},_e=function(t,e){let s=0;console.log(`
solveProblem - started`),s=Date.now();let n=!1;const r=[...e.values()].sort((o,u)=>u-o);for(const o of r){if(o<=0||(console.log(`	Iteration in wsd ${o}`),!z(this,C,xe).call(this,t,o)))continue;const u=new fe;if(u.setTarget(o),u.setTimeLimit(100),new Ye().solve(t,u)){n=!0,l(this,Gt,o);break}}return console.log(`solveProblem - finished (${n}, wsd = ${t.degree()})
`),console.log(`time: ${Date.now()-s}`),n},xe=function(t,e){return!i(this,y).setWorstDegree(e)||(i(this,y).initializeEstimatedMinimumSize(),!i(this,y).initializeDomain(t))?(console.log("Failure: initializeDomain"),!1):!0},Ae=function(t){const e=Ue(t),s=[i(this,y).getVariable()];let n=[i(this,y)];for(;n.length>0;){const r=[];for(const o of n)for(const u of o.children())u instanceof N&&r.push(u);z(this,C,ve).call(this,r,e);for(const o of r)s.push(o.getVariable());n=r}t.sortVariables((r,o)=>s.indexOf(r)-s.indexOf(o))},ve=function(t,e){t.sort((s,n)=>{{const r=s.getDescendantSize(),u=n.getDescendantSize()-r;if(u!==0)return u}{const r=e[s.getVariable().index()];return e[n.getVariable().index()]-r}})},M(Ut,"DEBUG",!0),M(Ut,"SORT_BY_DESCENDANT",!0),M(Ut,"SORT_BY_PATH_LENGTH",!0);{let h=function(){const f=document.createElement("canvas");document.body.appendChild(f),f.style.border="1px solid #0005",f.width=400,f.height=560;const c=f.getContext("2d");let E=s(),b=0;f.addEventListener("mousemove",p=>{p.offsetX>=f.width-o&&p.offsetY>=f.height-o?(document.body.style.cursor="nw-resize",p.stopPropagation()):document.body.style.cursor=""}),f.addEventListener("mousedown",p=>{p.offsetX>=f.width-o&&p.offsetY>=f.height-o&&(u=!0,d=p.clientX,O=p.clientY)}),window.addEventListener("mousemove",p=>{if(document.body.style.cursor="",u){const K=p.clientX-d,P=p.clientY-O;f.width=Math.max(400,f.width+K),f.height=Math.max(400,f.height+P),gt&&(c==null||c.drawImage(D,0,0),e(f,c)),d=p.clientX,O=p.clientY,clearTimeout(b),b=setTimeout(()=>{t(E,f,c)},100)}}),window.addEventListener("mouseup",()=>{u=!1}),t(E,f,c)},t=function(f,c,E){E.clearRect(0,0,c.width,c.height),E.font="12px san-serif",n(f,c.width,c.height),r(f,E),gt&&(D.width=c.width,D.height=c.height,gt.drawImage(c,0,0)),e(c,E)},e=function(f,c){if(c){const E=o;c.fillStyle="rgba(0, 0, 0, 0.15)",c.fillRect(f.width-E,f.height-E,E,E),c.strokeStyle="rgba(0, 0, 0, 0.5)",c.lineWidth=2;for(let b=0;b<E;b+=6)c.beginPath(),c.moveTo(f.width-b,f.height),c.lineTo(f.width,f.height-b),c.stroke()}},s=function(){const f=new Ut,c=new Jt({children:[new ue("Long Caption1","Caption1"),new qe("OK","Cancel")]}),E=new jt("Checkbox"),b=new jt("Item 1","Item 2","Item 3","Item 4","Item 5","Item 6","Item 7","Item 8"),p=new Jt({children:[E,b]}),K=new je(new ue("Long Label2","Label2"),new jt("Checkbox2")),P=new Jt({children:[K,c,p]});return f.setRootContainer(P),f},n=function(f,c,E){const b=Math.floor(c/o),p=Math.floor(E/o);return f.layoutContainer({width:b,height:p})},r=function(f,c){E(f.getRootContainer(),0,0);function E(b,p,K){const{x:P,y:$t}=b.getLocation(),{width:Bt,height:Kt}=b.getSize();if(c.strokeStyle=b.isValid()?"rgba(0, 0, 0, 0.5)":"rgba(255, 0, 0, 0.75)",c.lineWidth=1,c.strokeRect(p*o+P*o,K*o+$t*o,Bt*o,Kt*o),c.fillStyle="rgba(0, 0, 0, 0.1)",c.fillRect(p*o+P*o,K*o+$t*o,Bt*o,Kt*o),c.strokeStyle="",c.fillStyle="rgba(0, 0, 0, 0.85)",c.fillText(`${b.name()} ${Bt}, ${Kt}`,p*o+(P+.1)*o,K*o+($t+.7)*o),b instanceof N)for(const Ce of b.children())E(Ce,P,$t)}};document.addEventListener("DOMContentLoaded",()=>{h()});const o=24;let u=!1,d=0,O=0;const D=document.createElement("canvas"),gt=D.getContext("2d")}
